/**-----------------------------------------------------------------------------------------
* Copyright Â© 2020 Progress Software Corporation. All rights reserved.
* Licensed under commercial license. See LICENSE.md in the project root for more information
*-------------------------------------------------------------------------------------------*/
System.register("@progress/kendo-angular-dropdowns",["@progress/kendo-angular-popup","tslib","@angular/core","@angular/common","@angular/forms","@progress/kendo-angular-common","rxjs","rxjs/operators","@progress/kendo-angular-l10n"],function(O){var o,r,s,p,l,u,d,c,h;function t(e){return e.__useDefault?e.default:e}return{setters:[function(e){o=t(e)},function(e){r=t(e)},function(e){s=t(e)},function(e){p=t(e)},function(e){l=t(e)},function(e){u=t(e)},function(e){d=t(e)},function(e){c=t(e)},function(e){h=t(e)}],execute:function(){function n(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i,a;a={},n.m=i=[function(e,t){e.exports=r},function(e,t){e.exports=s},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t(4);r.isPresent=function(e){return null!=e},r.isNumber=function(e){return!isNaN(e)},r.guid=function(){for(var e,t="",i=0;i<32;i++)e=16*Math.random()|0,8!==i&&12!==i&&16!==i&&20!==i||(t+="-"),t+=(12===i?4:16===i?3&e|8:e).toString(16);return t},r.combineStr=function(e,t){return e.concat(t.substr(t.toLowerCase().indexOf(e.toLowerCase())+e.length))},r.isWindowAvailable=function(){return"undefined"!=typeof window},r.isArray=function(e){return Array.isArray(e)},r.isObject=function(e){return r.isPresent(e)&&"object"==typeof e},r.isEmptyString=function(e){return"string"==typeof e&&0===e.length},r.resolveValuesInArray=function(e,i,n){return void 0===i&&(i=[]),e.map(function(t){return i.find(function(e){return e[n]===t})}).filter(function(e){return void 0!==e})},r.validateComplexValues=function(e,t){return r.isArray(e)&&e.filter(function(e){return r.isObject(e)&&e[t]})},r.resolveAllValues=function(e,t,i){var n=r.validateComplexValues(e,i)||[];return(r.resolveValuesInArray(e,t,i)||[]).concat(n)},r.isObjectArray=function(e){return r.isArray(e)&&e.every(function(e){return r.isObject(e)})},r.selectedIndices=function(e,t,a){var o=t.map(function(e){return r.isPresent(e)&&r.isPresent(e[a])?e[a]:e});return e.reduce(function(e,t){var i=r.isPresent(t)&&r.isPresent(t[a])?t[a]:t,n=o.indexOf(i);return-1!==n&&e.push(n),e},[])},r.getter=function(e,t,i){if(void 0===i&&(i=!1),r.isPresent(e))return i?t&&r.isPresent(e[t])?e[t]:e:t?e[t]:e},r.resolveValue=function(t){var e;return r.isPresent(t.value)?{dataItem:e=[t.defaultItem].concat(t.data).find(function(e){return r.getter(e,t.valueField)===t.value}),focused:t.data.indexOf(e),selected:t.data.indexOf(e)}:t.index?(e=t.data[t.index],{dataItem:t.data[t.index],focused:t.index,selected:t.index}):{dataItem:t.defaultItem,focused:-1,selected:-1}},r.sameCharsOnly=function(e,t){for(var i=0;i<e.length;i++)if(e.charAt(i)!==t)return!1;return!0},r.shuffleData=function(e,t,i){var n=e;return i&&(n=[i].concat(n)),n.slice(t).concat(n.slice(0,t))},r.matchText=function(e,t,i){if(!r.isPresent(e))return!1;var n=String(e);return i&&(n=n.toLowerCase()),0===n.indexOf(t)},r.elementFromPoint=function(e,t){if(i.isDocumentAvailable())return document.elementFromPoint(e,t)},r.hasProps=function(t,e){return!!r.isPresent(t)&&e.every(function(e){return t.hasOwnProperty(e)})},r.isUntouched=function(e){return e.className.includes("ng-untouched")}},function(e,t){e.exports=h},function(e,t){e.exports=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(2),r=(s.prototype.getTotal=function(){return this.total},s.prototype.isSelected=function(t){return o.isPresent(this.selectedIndices.find(function(e){return e===t}))},s.prototype.isFocused=function(e){return e===this.focused},s.prototype.focus=function(e){this.isFocused(e)||(this.focused=e,this.onFocus.emit(e))},s.prototype.select=function(e){this.isSelected(e)||(this.selectedIndices=[e],this.focused=e,this.onSelect.emit({indices:[e],newSelection:o.isPresent(e)}))},s.prototype.add=function(e){this.isSelected(e)||(this.selectedIndices.push(e),this.focused=e,this.onChange.emit({added:e,indices:this.selectedIndices.slice()}))},s.prototype.unselect=function(e){var t;this.isSelected(e)&&(t=this.selectedIndices.indexOf(e),this.selectedIndices.splice(t,1),this.focused=e,this.onChange.emit({indices:this.selectedIndices.slice(),removed:e}))},s.prototype.change=function(e){var t=o.isPresent(e)&&!this.isSelected(e);this.selectedIndices=[e],this.focused=e,this.onChange.emit({indices:[e],newSelection:t})},s.prototype.resetSelection=function(e){this.selectedIndices=e instanceof Array?e:[e],this.focused=this.selectedIndices[this.selectedIndices.length-1]},Object.defineProperty(s.prototype,"selected",{get:function(){return this.selectedIndices.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focused",{get:function(){return this.focusedIndex},set:function(e){this.focusedIndex!==e&&(this.focusedIndex=e,this.onFocus.emit(e))},enumerable:!0,configurable:!0}),n.__decorate([a.Injectable()],s));function s(){this.onSelect=new a.EventEmitter,this.onChange=new a.EventEmitter,this.onFocus=new a.EventEmitter,this.total=0,this.selectedIndices=[]}t.SelectionService=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:"[kendoDropDownListFixedGroupTemplate],[kendoComboBoxFixedGroupTemplate],[kendoAutoCompleteFixedGroupTemplate],[kendoMultiSelectFixedGroupTemplate]"}),n.__metadata("design:paramtypes",[a.TemplateRef])],function(e){this.templateRef=e});t.FixedGroupTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:"[kendoDropDownListGroupTemplate],[kendoComboBoxGroupTemplate],[kendoAutoCompleteGroupTemplate],[kendoMultiSelectGroupTemplate]"}),n.__metadata("design:paramtypes",[a.TemplateRef])],function(e){this.templateRef=e});t.GroupTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:"[kendoDropDownListItemTemplate],[kendoComboBoxItemTemplate],[kendoAutoCompleteItemTemplate],[kendoMultiSelectItemTemplate]"}),n.__metadata("design:paramtypes",[a.TemplateRef])],function(e){this.templateRef=e});t.ItemTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(8),r=i(7),s=i(6),p=i(16),l=i(15),u=i(20),d=i(52),c=i(51),h=i(41),m=[p.HeaderTemplateDirective,l.FooterTemplateDirective,o.ItemTemplateDirective,r.GroupTemplateDirective,s.FixedGroupTemplateDirective,u.NoDataTemplateDirective,d.LocalizedMessagesDirective,c.CustomMessagesComponent,h.FilterDirective],v=n.__decorate([a.NgModule({declarations:[m],exports:[m]})],function(){});t.SharedDirectivesModule=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(1),a=i(4),o=i(48),r=i(8),p=i(7),l=i(6),u=i(2),d=i(5),c=i(22),h=i(21),m=i(14),v=i(13),g=(Object.defineProperty(f.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e[0]&&e[0].header?e.slice(0):e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"pageSize",{get:function(){return this.virtual.pageSize?this.virtual.pageSize:Math.round(this.height/this.virtual.itemHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"scrollHeight",{get:function(){return(this.dataService.grouped?this.virtual.total-1:this.virtual.total)*this.virtual.itemHeight},enumerable:!0,configurable:!0}),f.prototype.ngOnChanges=function(e){a.isChanged("data",e,!1)&&this.lastLoaded<=0&&(this.lastLoaded=this.data.length-1,this.scrollToFocused=!e.data.isFirstChange())},f.prototype.ngAfterViewInit=function(){var e=this;this.zone.runOutsideAngular(function(){e.scrollSubscription=c.fromEvent(e.content.nativeElement,"scroll").pipe(h.auditTime(100),h.tap(e.prefetchData.bind(e)),h.tap(e.findCurrentGroup.bind(e))).subscribe(function(){e.lastScrollTop=e.content.nativeElement.scrollTop})})},f.prototype.ngAfterViewChecked=function(){var e;this.virtual&&this.positionItems(),this.items&&this.scrollToFocused&&(this.scrollToFocused=!1,e=this.items.length&&-1===this.selectionService.focused?0:this.selectionService.focused,this.scrollToItem(e)),this.dataService.grouped&&this.findCurrentGroup()},f.prototype.ngOnDestroy=function(){this.selectSubscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe()},f.prototype.firstVisibleItem=function(){var t=this,e=this.content.nativeElement,i=e.getBoundingClientRect(),n=Array.prototype.slice.call(e.querySelectorAll(".k-state-disabled"));n.forEach(function(e){return t.renderer.setStyle(e,"pointer-events","auto")});var a=document.elementFromPoint(i.left+1,i.top+1);return n.forEach(function(e){return t.renderer.setStyle(e,"pointer-events","none")}),a},f.prototype.findCurrentGroup=function(){var e,t;this.dataService.grouped?((e=this.firstVisibleItem())?(t=void 0,"group"===e.getAttribute("role")?(t=parseInt(e.getAttribute("group-index"),10),this.currentGroup=this.dataService.groupAt(t).value):(t=parseInt(e.getAttribute("index"),10),this.currentGroup=this.dataService.itemGroup(this.dataService.itemAt(t)))):this.currentGroup=void 0,this.cdr.detectChanges()):this.currentGroup=void 0},f.prototype.prefetchData=function(){var e,t,i,n,a,o,r;this.virtual&&(e=Math.trunc(this.content.nativeElement.clientHeight/this.virtual.itemHeight),t=this.content.nativeElement.scrollTop,i=Math.trunc(t/this.virtual.itemHeight),n=t>this.lastScrollTop,a=i+e>=this.lastLoaded&&this.lastLoaded<this.virtual.total-1,o=this.pageSize-(this.lastLoaded-this.startFrom),r=this.lastLoaded-this.pageSize+e>=i-o,n&&a&&this.changePage(i),!n&&r&&this.changePage(i-this.pageSize+e+1))},f.prototype.changePage=function(t){var i=this;this.zone.run(function(){var e=i.pageSize+t;e>i.virtual.total&&(t--,e=i.virtual.total),t<0&&(t=0),i.startFrom=t,i.lastLoaded=e,i.pageChange.emit({skip:t,take:i.pageSize})})},f.prototype.index=function(e,t){return 0<e?this.dataService.groupIndices[e-1]+t:t},f.prototype.getText=function(e){return u.getter(e,this.textField)},f.prototype.getValue=function(e){return u.getter(e,this.valueField)},f.prototype.isDisabled=function(e){return u.isPresent(this.virtual)&&(e+=this.virtual.skip),this.disabledItemsService.isIndexDisabled(e)},f.prototype.scrollToItem=function(e){var t,i=e;this.dataService.grouped&&(i=this.dataService.flatIndex(e),i+=this.firstGroupHeaderInTargetedPage(i)?-1:0),this.virtual&&-1<i?this.scrollToIndex(i):(t=this.items.toArray(),u.isPresent(t[i])&&-1!==i&&this.scroll(t[i].element))},f.prototype.scrollToIndex=function(e){var t=this.content.nativeElement,i=t.scrollTop,n=e*this.virtual.itemHeight,a=this.virtual.itemHeight,o=t.clientHeight,r=n+a;n<i?i=n:i+o<r&&(i=r-o),t.scrollTop=i},f.prototype.scroll=function(e){var t,i,n,a,o,r,s;e&&(t=e.nativeElement,i=this.content.nativeElement,n=t.offsetTop,a=t.offsetHeight,o=i.scrollTop,r=i.clientHeight,s=n+a,n<o?o=n:o+r<s&&(o=s-r),i.scrollTop=o)},f.prototype.positionItems=function(){var n=this;this.items.forEach(function(e,t){var i=(t+n.startFrom)*n.virtual.itemHeight;n.renderer.setStyle(e.element.nativeElement,"transform","translateY("+i+"px")})},f.prototype.firstGroupHeaderInTargetedPage=function(e){return!u.isPresent(this.virtual)||0===this.virtual.skip&&this.virtual.pageSize>e},n.__decorate([s.Input(),n.__metadata("design:type",Array)],f.prototype,"selected",void 0),n.__decorate([s.Input(),n.__metadata("design:type",Number)],f.prototype,"focused",void 0),n.__decorate([s.Input(),n.__metadata("design:type",String)],f.prototype,"textField",void 0),n.__decorate([s.Input(),n.__metadata("design:type",String)],f.prototype,"valueField",void 0),n.__decorate([s.Input(),n.__metadata("design:type",Number)],f.prototype,"height",void 0),n.__decorate([s.Input(),n.__metadata("design:type",r.ItemTemplateDirective)],f.prototype,"template",void 0),n.__decorate([s.Input(),n.__metadata("design:type",p.GroupTemplateDirective)],f.prototype,"groupTemplate",void 0),n.__decorate([s.Input(),n.__metadata("design:type",l.FixedGroupTemplateDirective)],f.prototype,"fixedGroupTemplate",void 0),n.__decorate([s.Input(),n.__metadata("design:type",Boolean)],f.prototype,"show",void 0),n.__decorate([s.Input(),n.__metadata("design:type",String)],f.prototype,"id",void 0),n.__decorate([s.Input(),n.__metadata("design:type",String)],f.prototype,"optionPrefix",void 0),n.__decorate([s.Input(),n.__metadata("design:type",Boolean)],f.prototype,"multipleSelection",void 0),n.__decorate([s.Input(),n.__metadata("design:type",Object)],f.prototype,"virtual",void 0),n.__decorate([s.Input(),n.__metadata("design:type",Array),n.__metadata("design:paramtypes",[Array])],f.prototype,"data",null),n.__decorate([s.Output(),n.__metadata("design:type",s.EventEmitter)],f.prototype,"onClick",void 0),n.__decorate([s.Output(),n.__metadata("design:type",s.EventEmitter)],f.prototype,"pageChange",void 0),n.__decorate([s.ViewChildren(o.ListItemDirective),n.__metadata("design:type",s.QueryList),n.__metadata("design:paramtypes",[s.QueryList])],f.prototype,"items",null),n.__decorate([s.ViewChild("content"),n.__metadata("design:type",s.ElementRef)],f.prototype,"content",void 0),n.__decorate([s.ViewChild("list"),n.__metadata("design:type",s.ElementRef)],f.prototype,"list",void 0),n.__decorate([s.Component({selector:"kendo-list",template:'\n    <div *ngIf="dataService.grouped"\n        class=\'k-outer-group-header k-first\'\n        [ngClass]="{\'k-virtual-item\': virtual}"\n        [ngStyle]="{\n            \'height.px\': virtual?.itemHeight,\n            \'minHeight.px\' : virtual?.itemHeight,\n            \'boxSizing\' : virtual ? \'border-box\' : \'inherit\'}"\n        >\n        <ng-template *ngIf="fixedGroupTemplate"\n            [templateContext]="{\n                templateRef: fixedGroupTemplate.templateRef,\n                $implicit: currentGroup\n            }">\n        </ng-template>\n        <ng-template [ngIf]="!fixedGroupTemplate"><strong>{{ currentGroup }}</strong> </ng-template>\n    </div>\n    <div #content\n         [ngClass]="{ \'k-virtual-content\': virtual, \'k-list-scroller\': !virtual }"\n         [style.maxHeight.px]="height"\n         unselectable="on">\n    <ul #list\n        role="listbox"\n        class="k-list k-reset"\n        [ngClass]="{ \'k-virtual-list\': virtual }"\n        [attr.id]="id"\n        [attr.aria-hidden]="!show">\n         <ng-template *ngIf="!dataService.grouped && show" ngFor let-dataItem let-itemIndex="index" [ngForOf]="data">\n            <li\n                role="option"\n                kendoDropDownsSelectable\n                [height]="virtual?.itemHeight"\n                [index]="itemIndex + startFrom"\n                [multipleSelection]="multipleSelection"\n                [attr.id]="optionPrefix + \'-\' + getValue(dataItem)"\n                [attr.tabIndex]="-1"\n                class="k-item"\n                [ngClass]="{ \'k-virtual-item\': virtual, \'k-state-disabled\': isDisabled(itemIndex) }">\n                <ng-template *ngIf="template"\n                    [templateContext]="{\n                        templateRef: template.templateRef,\n                        $implicit: dataItem\n                    }">\n                </ng-template>\n                <ng-template [ngIf]="!template">{{ getText(dataItem) }}</ng-template>\n            </li>\n         </ng-template>\n         <ng-template *ngIf="dataService.grouped" ngFor let-dataItem let-itemIndex="index" [ngForOf]="data">\n            <li\n                *ngIf="dataItem.header && dataItem.index > 0"\n                role="group"\n                class=\'k-outer-group-header\'\n                [ngClass]="{ \'k-virtual-item\': virtual }"\n                [ngStyle]="{\n                    \'height.px\': virtual?.itemHeight,\n                    \'minHeight.px\' : virtual?.itemHeight,\n                    \'boxSizing\' : virtual ? \'border-box\' : \'inherit\'}"\n                [attr.group-index]="dataItem.index"\n                [attr.id]="optionPrefix + \'-\' + getValue(dataItem.value)"\n                [attr.tabIndex]="-1">\n                    <ng-template *ngIf="groupTemplate"\n                          [templateContext]="{\n                            templateRef: groupTemplate.templateRef,\n                            $implicit: dataItem.value\n                    }">\n                    </ng-template>\n                    <ng-template [ngIf]="!groupTemplate"><strong> {{ dataItem.value }}</strong> </ng-template>\n              </li>\n            <li\n                *ngIf="!dataItem.header"\n                role="option"\n                kendoDropDownsSelectable\n                [height]="virtual?.itemHeight"\n                [index]="dataItem.offsetIndex"\n                [multipleSelection]="multipleSelection"\n                [attr.absolute-index]="dataItem.index"\n                [attr.id]="optionPrefix + \'-\' + getValue(dataItem.value)"\n                [attr.tabIndex]="-1"\n                class="k-item"\n                [ngClass]="{ \'k-virtual-item\': virtual, \'k-state-disabled\': isDisabled(dataItem.offsetIndex) }">\n                <ng-template *ngIf="template"\n                    [templateContext]="{\n                        templateRef: template.templateRef,\n                        $implicit: dataItem.value\n                    }">\n                </ng-template>\n                <ng-template [ngIf]="!template">{{ getText(dataItem.value) }}</ng-template>\n            </li>\n        </ng-template>\n    </ul>\n    <div *ngIf="virtual" class="k-height-container" role="presentation">\n        <div [style.height.px]="scrollHeight"></div>\n    </div>\n    </div>\n  '}),n.__metadata("design:paramtypes",[v.DataService,s.ElementRef,d.SelectionService,m.DisabledItemsService,s.ChangeDetectorRef,s.NgZone,s.Renderer2])],f));function f(e,t,i,n,a,o,r){this.dataService=e,this.wrapper=t,this.selectionService=i,this.disabledItemsService=n,this.cdr=a,this.zone=o,this.renderer=r,this.selected=[],this.focused=-1,this.show=!0,this.multipleSelection=!1,this.onClick=new s.EventEmitter,this.pageChange=new s.EventEmitter,this.startFrom=0,this.lastLoaded=0,this.lastScrollTop=0,this.scrollToFocused=!1,this.selectSubscription=c.merge(this.selectionService.onSelect.pipe(h.map(function(e){return e.indices[0]})),this.selectionService.onFocus).subscribe(this.scrollToItem.bind(this))}t.ListComponent=g},function(e,t){e.exports=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(a.prototype.preventDefault=function(){this.prevented=!0},a.prototype.isDefaultPrevented=function(){return this.prevented},a);function a(){this.prevented=!1}t.PreventableEvent=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),s=i(2),o=(Object.defineProperty(r.prototype,"data",{get:function(){return this.grouped?this._flatData:this._data},set:function(e){this._data=e,this.grouped=this.isGrouped(e),this.grouped&&(this.groupIndices=this.getGroupIndices(e),this._flatData=this.flatten(e))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"itemsCount",{get:function(){return s.isPresent(this.data)&&0!==this.data.length?(this.grouped?this._flatData.filter(function(e){return!e.header}):this.data).length:0},enumerable:!0,configurable:!0}),r.prototype.isGrouped=function(e){return s.isPresent(e)&&0!==e.length&&s.isPresent(e[0])&&s.hasProps(e[0],["aggregates","field","items","value"])},r.prototype.getGroupIndices=function(e){for(var t=[],i=0;i<=e.length-1;i++)t[i]=(t[i-1]||0)+e[i].items.length;return t},r.prototype.filter=function(e){var t=[];if(this.isGrouped(this.data))for(var i=0;i<=this.groupIndices.length-1;i++){var n=this.data[i].items.filter(e);n&&(t=t.concat(n))}else t=this.data.filter(e);return t},r.prototype.indexOf=function(t,e){void 0===e&&(e=0);var i=function(e){return e===t};return this.grouped&&(i=function(e){return e.value===t}),this.findIndex(i,e)},r.prototype.findIndex=function(e,t){void 0===t&&(t=0);var i,n,a=-1;return a=this.grouped?(i=this._flatData.filter(function(e){return!e.header&&e.offsetIndex>=t}))[a=i.findIndex(e)]?i[a].offsetIndex:-1:-1!==(n=(i=this.data.slice(t)).findIndex(e))?n+t:-1},r.prototype.closestGroup=function(e){for(var t=e;0<=t;t--)if(this._flatData[t].header)return this._flatData[t]},r.prototype.find=function(e){var t=this.findIndex(e);return this.itemAt(t)},r.prototype.flatIndex=function(t){if(0===this.itemsCount)return-1;if(!this.grouped)return t;var e=this._flatData.find(function(e){return!e.header&&e.offsetIndex===t});return e?e.index:-1},r.prototype.itemAt=function(t){var e,i;return 0===this.itemsCount||(this.grouped?(i=this._flatData.find(function(e){return!e.header&&e.offsetIndex===t}))&&(e=i.value):e=this.data[t]),e},r.prototype.groupAt=function(t){if(0!==this.itemsCount&&this.isGrouped)return this._flatData.find(function(e){return e.header&&e.index===t})},r.prototype.groupField=function(){if(0!==this.itemsCount&&this.isGrouped)return this._data[0].field},r.prototype.itemGroup=function(e){if(e&&0!==this.itemsCount&&this.isGrouped){var t=this.groupField();return t?e[t]:void 0}},r.prototype.flatten=function(e,t,i,n){void 0===t&&(t=void 0),void 0===i&&(i=0),void 0===n&&(n=0);var a=[];s.isPresent(t)&&a.push({header:!0,index:n+i,offsetIndex:n,value:t});for(var o=0;o<e.length;o++){var r=[];e[o].items?(r=this.flatten(e[o].items,e[o].value,i,o),i+=e[o].items.length):r.push({header:!1,index:n+i+o+1,offsetIndex:i+o,value:e[o]}),a=a.concat(r)}return a},n.__decorate([a.Injectable()],r));function r(){this.grouped=!1,this.groupIndices=[]}t.DataService=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(2),r=i(13),s=(p.prototype.isIndexDisabled=function(e){if(this.itemDisabled){var t=this.dataService.itemAt(e);if(o.isPresent(t))return this.itemDisabled({dataItem:t,index:e});if(o.isPresent(this.defaultItem))return this.itemDisabled({dataItem:this.defaultItem,index:-1})}},p.prototype.isItemDisabled=function(e){if(this.itemDisabled){var t=this.dataService.indexOf(e);if(-1!==t)return this.itemDisabled({dataItem:e,index:t});if(o.isPresent(this.defaultItem))return this.itemDisabled({dataItem:this.defaultItem,index:-1})}},n.__decorate([a.Injectable(),n.__metadata("design:paramtypes",[r.DataService])],p));function p(e){this.dataService=e,this.itemDisabled=null}t.DisabledItemsService=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:"[kendoDropDownListFooterTemplate],[kendoComboBoxFooterTemplate],[kendoAutoCompleteFooterTemplate],[kendoMultiSelectFooterTemplate]"}),n.__metadata("design:paramtypes",[a.TemplateRef])],function(e){this.templateRef=e});t.FooterTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:"[kendoDropDownListHeaderTemplate],[kendoComboBoxHeaderTemplate],[kendoAutoCompleteHeaderTemplate],[kendoMultiSelectHeaderTemplate]"}),n.__metadata("design:paramtypes",[a.TemplateRef])],function(e){this.templateRef=e});t.HeaderTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(53),r=i(25),s=i(10),p=i(29),l=i(11),u=i(4),d=i(9),c=i(48),h=i(43),m=i(44),v=[s.ListComponent,c.ListItemDirective,h.SelectableDirective,p.SearchBarComponent,m.TemplateContextDirective],g=n.__decorate([a.NgModule({declarations:[v],exports:[v,o.CommonModule,r.FormsModule,l.PopupModule,u.ResizeSensorModule,d.SharedDirectivesModule,u.EventsModule],imports:[o.CommonModule,r.FormsModule,l.PopupModule,u.ResizeSensorModule,d.SharedDirectivesModule,u.EventsModule]})],function(){});t.SharedModule=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1);t.TOUCH_ENABLED=new n.InjectionToken("dropdowns-touch-enabled")},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function n(){}t.FilterableDropDownComponentBase=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:"[kendoDropDownListNoDataTemplate],[kendoComboBoxNoDataTemplate],[kendoAutoCompleteNoDataTemplate],[kendoMultiSelectNoDataTemplate]"}),n.__metadata("design:paramtypes",[a.TemplateRef])],function(e){this.templateRef=e});t.NoDataTemplateDirective=o},function(e,t){e.exports=c},function(e,t){e.exports=d},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.NavigationAction||(t.NavigationAction={}))[n.Undefined=0]="Undefined",n[n.Open=1]="Open",n[n.Close=2]="Close",n[n.Enter=3]="Enter",n[n.Tab=4]="Tab",n[n.Esc=5]="Esc",n[n.Delete=6]="Delete",n[n.Backspace=7]="Backspace",n[n.Home=8]="Home",n[n.End=9]="End",n[n.Up=10]="Up",n[n.Down=11]="Down",n[n.Left=12]="Left",n[n.Right=13]="Right"},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.Keys||(t.Keys={}))[n.backspace=8]="backspace",n[n.tab=9]="tab",n[n.enter=13]="enter",n[n.shift=16]="shift",n[n.ctrl=17]="ctrl",n[n.alt=18]="alt",n[n["pause/break"]=19]="pause/break",n[n["caps lock"]=20]="caps lock",n[n.esc=27]="esc",n[n.space=32]="space",n[n["page up"]=33]="page up",n[n["page down"]=34]="page down",n[n.end=35]="end",n[n.home=36]="home",n[n.left=37]="left",n[n.up=38]="up",n[n.right=39]="right",n[n.down=40]="down",n[n.insert=45]="insert",n[n.delete=46]="delete",n[n.command=91]="command",n[n["left command"]=91]="left command",n[n["right command"]=93]="right command",n[n["numpad *"]=106]="numpad *",n[n["numpad +"]=107]="numpad +",n[n["numpad -"]=109]="numpad -",n[n["numpad ."]=110]="numpad .",n[n["numpad /"]=111]="numpad /",n[n["num lock"]=144]="num lock",n[n["scroll lock"]=145]="scroll lock",n[n["my computer"]=182]="my computer",n[n["my calculator"]=183]="my calculator",n[n[";"]=186]=";",n[n["="]=187]="=",n[n[","]=188]=",",n[n["-"]=189]="-",n[n["."]=190]=".",n[n["/"]=191]="/",n[n["`"]=192]="`",n[n["["]=219]="[",n[n["\\"]=220]="\\",n[n["]"]=221]="]",n[n["'"]=222]="'"},function(e,t){e.exports=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:"[kendoMultiSelectGroupTagTemplate]"}),n.__metadata("design:paramtypes",[a.TemplateRef])],function(e){this.templateRef=e});t.GroupTagTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a={pageSize:50,itemHeight:28};t.normalizeVirtualizationSettings=function(e){return!0===e?a:e?n.__assign({pageSize:a.pageSize},e):null}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),p=i(2),r=i(24),s=i(23),o=i(14),l=i(5),u=function(e,t){this.index=e,this.originalEvent=t};t.NavigationEvent=u;var d=(c.prototype.process=function(e){var t,i=e.originalEvent.keyCode,n=e.originalEvent.altKey,a=s.NavigationAction.Undefined;n&&i===r.Keys.down?a=s.NavigationAction.Open:n&&i===r.Keys.up?a=s.NavigationAction.Close:i===r.Keys.enter?a=s.NavigationAction.Enter:i===r.Keys.esc?a=s.NavigationAction.Esc:i===r.Keys.tab?a=s.NavigationAction.Tab:i===r.Keys.up?(t=this.next({current:e.current,start:e.min,end:e.max,step:-1}),a=s.NavigationAction.Up):i===r.Keys.left?(t=this.next({current:e.current,start:e.min,end:e.max,step:-1}),a=s.NavigationAction.Left):i===r.Keys.down?(t=this.next({current:e.current,start:e.min,end:e.max,step:1}),a=s.NavigationAction.Down):i===r.Keys.right?(t=this.next({current:e.current,start:e.min,end:e.max,step:1}),a=s.NavigationAction.Right):i===r.Keys.home?(t=this.isDisabled(0)?e.current:0,a=s.NavigationAction.Home):i===r.Keys.end?(t=this.isDisabled(e.max)?e.current:e.max,a=s.NavigationAction.End):i===r.Keys.delete?a=s.NavigationAction.Delete:i===r.Keys.backspace&&(a=s.NavigationAction.Backspace);var o=new u(t,e.originalEvent);return a!==s.NavigationAction.Undefined&&this[s.NavigationAction[a].toLowerCase()].emit(o),a},c.prototype.next=function(e){var t=e.current,i=e.start,n=e.end,a=e.step,o=p.isPresent(t)?this.clampIndex(t+a,i,n):i,r=this.firstFocusableIndex(o,i,n,a);if(p.isPresent(r))return r;if(this.selectionService.isSelected(t)&&i<=t)return t;var s=-1*a;return this.firstFocusableIndex(o,i,n,s)},c.prototype.clampIndex=function(e,t,i){return!p.isPresent(e)||e<t?t:i<e?i:e},c.prototype.firstFocusableIndex=function(e,t,i,n){for(;t<=e&&e<=i;){if(!this.isDisabled(e))return e;e+=n}},c.prototype.isDisabled=function(e){if(this.disabledItemsService)return this.disabledItemsService.isIndexDisabled(e)},n.__decorate([a.Injectable(),n.__metadata("design:paramtypes",[o.DisabledItemsService,l.SelectionService])],c));function c(e,t){this.disabledItemsService=e,this.selectionService=t,this.open=new a.EventEmitter,this.close=new a.EventEmitter,this.enter=new a.EventEmitter,this.tab=new a.EventEmitter,this.esc=new a.EventEmitter,this.up=new a.EventEmitter,this.right=new a.EventEmitter,this.down=new a.EventEmitter,this.left=new a.EventEmitter,this.delete=new a.EventEmitter,this.backspace=new a.EventEmitter,this.home=new a.EventEmitter,this.end=new a.EventEmitter}t.NavigationService=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(4),r=i(24),s=i(2),p=i(3),l=(Object.defineProperty(u.prototype,"userInput",{get:function(){return this._userInput},set:function(e){this._userInput=e||""},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"value",{get:function(){return this.input.nativeElement.value},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e||"",this.setInputSize()},enumerable:!0,configurable:!0}),u.prototype.ngOnInit=function(){var i=this;this.localizationChangeSubscription=this.localization.changes.subscribe(function(e){var t=e.rtl;return i.direction=t?"rtl":"ltr"})},u.prototype.ngOnChanges=function(e){var t,i,n;this.input&&(e.userInput||e.suggestedText)&&(t=!e.userInput||!e.userInput.previousValue||this._previousValue===e.userInput.previousValue?this._previousValue:e.userInput.currentValue||"",i=this.input.nativeElement.selectionStart,n=t.length===i,this.writeInputValue(this.suggestedText?s.combineStr(this.userInput,this.suggestedText):this.userInput),this.suggestedText?this.setInputSelection(this.userInput.length,this.suggestedText.length):n?this.setInputSelection(this.userInput.length,this.userInput.length):this.setInputSelection(i,i),this._previousValue=this.userInput)},u.prototype.ngOnDestroy=function(){this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe()},u.prototype.writeInputValue=function(e){o.isDocumentAvailable()&&this.renderer.setProperty(this.input.nativeElement,"value",e)},u.prototype.setInputSelection=function(e,t){if(o.isDocumentAvailable()&&this.input.nativeElement===document.activeElement)try{this.input.nativeElement.setSelectionRange(e,t)}catch(e){}},u.prototype.handleInput=function(e){var t=e.target.value;t!==this.userInput&&(this._previousValue=t,this.valueChange.emit(t))},u.prototype.handleFocus=function(e){this.onFocus.emit(e)},u.prototype.handleBlur=function(e){this.onBlur.emit(e)},u.prototype.handleKeydown=function(e){var t=e.keyCode;-1<[r.Keys.up,r.Keys.down,r.Keys.left,r.Keys.right,r.Keys.enter,r.Keys.esc,r.Keys.delete,r.Keys.backspace,r.Keys.home,r.Keys.end].indexOf(t)&&this.onNavigate.emit(e)},u.prototype.focus=function(){o.isDocumentAvailable()&&this.input.nativeElement.focus()},u.prototype.blur=function(){o.isDocumentAvailable()&&this.input.nativeElement.blur()},u.prototype.setInputSize=function(){function e(e){return e?e.length:0}var t=this.input.nativeElement,i=e(this.placeholder),n=e(this.value),a=Math.max(i,n,1);this.renderer.setAttribute(t,"size",a.toString())},n.__decorate([a.Input(),n.__metadata("design:type",String)],u.prototype,"id",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String)],u.prototype,"listId",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String)],u.prototype,"tagListId",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String)],u.prototype,"activeDescendant",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String)],u.prototype,"noDataLabel",void 0),n.__decorate([a.Input(),n.__metadata("design:type",Boolean)],u.prototype,"disabled",void 0),n.__decorate([a.Input(),n.__metadata("design:type",Boolean)],u.prototype,"readonly",void 0),n.__decorate([a.Input(),n.__metadata("design:type",Number)],u.prototype,"tabIndex",void 0),n.__decorate([a.Input(),n.__metadata("design:type",Boolean)],u.prototype,"popupOpen",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String)],u.prototype,"role",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String),n.__metadata("design:paramtypes",[String])],u.prototype,"userInput",null),n.__decorate([a.Input(),n.__metadata("design:type",String)],u.prototype,"suggestedText",void 0),n.__decorate([a.Output(),n.__metadata("design:type",a.EventEmitter)],u.prototype,"valueChange",void 0),n.__decorate([a.Output(),n.__metadata("design:type",a.EventEmitter)],u.prototype,"onBlur",void 0),n.__decorate([a.Output(),n.__metadata("design:type",a.EventEmitter)],u.prototype,"onFocus",void 0),n.__decorate([a.Output(),n.__metadata("design:type",a.EventEmitter)],u.prototype,"onClick",void 0),n.__decorate([a.Output(),n.__metadata("design:type",a.EventEmitter)],u.prototype,"onNavigate",void 0),n.__decorate([a.ViewChild("input",{static:!0}),n.__metadata("design:type",a.ElementRef)],u.prototype,"input",void 0),n.__decorate([a.HostBinding("class.k-searchbar"),n.__metadata("design:type",Boolean)],u.prototype,"searchBarClass",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String),n.__metadata("design:paramtypes",[String])],u.prototype,"placeholder",null),n.__decorate([a.Component({selector:"kendo-searchbar",template:'\n        <input #input\n            autocomplete="off"\n            [id]="id"\n            [disabled]="disabled"\n            [readonly]="readonly"\n            [placeholder]="placeholder"\n            [class]="\'k-input\'"\n            (input)="handleInput($event)"\n            (keydown)="handleKeydown($event)"\n            [kendoEventsOutsideAngular]="{\n                focus: handleFocus,\n                blur: handleBlur\n            }"\n            [scope]="this"\n            [attr.tabIndex]="tabIndex"\n            [attr.dir]="direction"\n            [attr.role]="role"\n            [attr.aria-disabled]="disabled"\n            [attr.aria-readonly]="readonly"\n            aria-haspopup="listbox"\n            [attr.aria-expanded]="popupOpen"\n            [attr.aria-owns]="listId"\n            [attr.aria-describedby]="tagListId"\n            [attr.aria-activedescendant]="activeDescendant"\n            [attr.aria-label]="noDataLabel"\n        />\n   '}),n.__metadata("design:paramtypes",[p.LocalizationService,a.Renderer2])],u));function u(e,t){this.localization=e,this.valueChange=new a.EventEmitter,this.onBlur=new a.EventEmitter,this.onFocus=new a.EventEmitter,this.onClick=new a.EventEmitter,this.onNavigate=new a.EventEmitter,this.searchBarClass=!0,this._userInput="",this._previousValue="",this._placeholder="",this.direction=e.rtl?"rtl":"ltr",this.renderer=t}t.SearchBarComponent=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:"[kendoMultiSelectTagTemplate]"}),n.__metadata("design:paramtypes",[a.TemplateRef])],function(e){this.templateRef=e});t.TagTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:"[kendoMultiSelectCustomItemTemplate]"}),n.__metadata("design:paramtypes",[a.TemplateRef])],function(e){this.templateRef=e});t.CustomItemTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(0),h=i(2),o=i(29),m=i(1),v=i(22),g=i(21),r=i(4),s=i(25),p=i(5),l=i(28),u=i(23),d=i(14),c=i(24),f=i(8),_=i(31),b=i(7),y=i(6),S=i(16),x=i(15),I=i(30),C=i(26),D=i(20),w=i(34),T=i(12),P=i(55),E=i(3),O=i(11),k=i(19),F=i(18),j=i(13),A=i(10),M=i(27),B={multi:!0,provide:s.NG_VALUE_ACCESSOR,useExisting:m.forwardRef(function(){return N})},N=((n=R).prototype.focus=function(){this.disabled||this.searchbar.focus()},R.prototype.onSearchBarFocus=function(){var e=this;this.isFocused||(this.isFocused=!0,r.hasObservers(this.onFocus)&&this._zone.run(function(){e.onFocus.emit()}))},R.prototype.blur=function(){this.disabled||this.searchbar.blur()},R.prototype.onSearchBarBlur=function(){var e=this;this.isFocused&&(this.isFocused=!1,r.hasObservers(this.onBlur)||r.hasObservers(this.filterChange)||r.hasObservers(this.close)||h.isUntouched(this.hostElement.nativeElement)?this._zone.run(function(){e.allowCustom||e.clearFilter(),e.closePopup(),e.onBlur.emit(),e.onTouchedCallback()}):(this.allowCustom||this.clearFilter(),this.closePopup()))},R.prototype.wrapperMousedown=function(e){var t=this.searchbar.input.nativeElement;if(0===e.button){if(this.isFocused&&this.isOpen&&e.target===t)return;(!this.touchEnabled||this.touchEnabled&&"SPAN"!==e.target.tagName)&&this.searchbar.focus(),this.togglePopup(!this.isOpen),e.preventDefault()}},R.prototype.onMouseDown=function(e){e.preventDefault()},R.prototype.onResize=function(){var e,t,i,n;this._open&&(e=this.popupRef.popupElement,i=(t=this.width).min,n=t.max,e.style.minWidth=i,e.style.width=n)},Object.defineProperty(R.prototype,"appendTo",{get:function(){var e=this.popupSettings.appendTo;if(e&&"root"!==e)return"component"===e?this.container:e},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"data",{get:function(){var e=this.virtual;if(e){var t=e.skip||0,i=t+e.pageSize;return e.total=this.dataService.data.length,this.dataService.data.slice(t,i)}return this.dataService.data},set:function(e){this.dataService.data=e||[],this.virtual&&(this.virtual.skip=0),this.setState(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e||[],!this.differ&&this.value&&(this.differ=this.differs.find(this.value).create())},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"tabIndex",{get:function(){return this.tabindex},set:function(e){this.tabindex=e},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"placeholder",{get:function(){return this.selectedDataItems.length?"":this._placeholder},set:function(e){this._placeholder=e||""},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"itemDisabled",{set:function(e){if("function"!=typeof e)throw new Error("itemDisabled must be a function, but received "+JSON.stringify(e)+".");this.disabledItemsService.itemDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"virtual",{get:function(){return this._virtualSettings},set:function(e){this._virtualSettings=M.normalizeVirtualizationSettings(e)},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"popupSettings",{get:function(){return this._popupSettings},set:function(e){this._popupSettings=Object.assign({animate:!0},e)},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"dir",{get:function(){return this.direction},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"disabledClass",{get:function(){return this.disabled},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"listContainerClasses",{get:function(){var e=["k-list-container","k-reset"];return this.popupSettings.popupClass&&e.push(this.popupSettings.popupClass),e},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"width",{get:function(){var e=0;r.isDocumentAvailable()&&(e=this.wrapper.nativeElement.offsetWidth);var t=this.popupSettings.width||e;return{min:isNaN(e)?e:e+"px",max:isNaN(t)?t:t+"px"}},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"height",{get:function(){var e=this.popupSettings.height;return h.isPresent(e)?e+"px":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"activeDescendant",{get:function(){var e,t,i=this.focusedTagIndex,n=this.selectionService.focused;if(h.isPresent(i)&&!this.isOpen)t=this.tags[i],e=this.tagPrefix;else{if(!h.isPresent(n)||-1===n||!this.isOpen)return null;t=this.dataService.itemAt(n),e=this.optionPrefix}return e+"-"+this.prop(this.valueField,this.valuePrimitive)(t)},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"noDataLabel",{get:function(){if(0===this.dataService.itemsCount)return this.noDataText},enumerable:!0,configurable:!0}),Object.defineProperty(R.prototype,"clearTitle",{get:function(){return this.localization.get("clearTitle")},enumerable:!0,configurable:!0}),R.prototype.verifySettings=function(){var e=!h.isPresent(this.valueField)!=!h.isPresent(this.textField);if(m.isDevMode()&&0!==this.value.length){if(!h.isArray(this.value))throw new Error(w.MultiselectMessages.array);if(!0===this.valuePrimitive&&h.isObjectArray(this.value))throw new Error(w.MultiselectMessages.primitive);if(!1===this.valuePrimitive&&!h.isObjectArray(this.value))throw new Error(w.MultiselectMessages.object);if(e)throw new Error(w.MultiselectMessages.textAndValue)}},R.prototype.change=function(e){var t,i,n,a,o;!h.isPresent(e.added)&&!h.isPresent(e.removed)||-1!==e.added&&-1!==e.removed?(h.isPresent(e.added)&&(t=this.dataService.itemAt(e.added),i=this.valuePrimitive&&h.isPresent(t)&&h.isPresent(t[this.valueField])?t[this.valueField]:t,this.value=this.value.concat([i]),this.cdr.markForCheck()),h.isPresent(e.removed)&&(n=this.dataService.itemAt(e.removed),a=this.prop(this.valueField,this.valuePrimitive),o=function(e){return a(e)!==a(n)},this.value=this.value.filter(o),this.selectedDataItems=this.selectedDataItems.filter(o),this.tags=this.tagMapper(this.selectedDataItems.slice()),this.cdr.detectChanges()),this.emitValueChange()):this.addCustomValue(this.text)},R.prototype.setState=function(e){var i=this,t=h.isObjectArray(e),n=this.dataService.data;this.dataService.grouped&&(n=n.filter(function(e){return!e.header}).map(function(e){return e.value}));var a,o,r=h.selectedIndices(this.value,n,this.valueField);this.selectionService.resetSelection(r),this.isOpen&&void 0===this.selectionService.focused&&(this.selectionService.focused=this.dataService.itemsCount?this.firstFocusableIndex(0):this.allowCustom?-1:void 0),!this.text&&(h.isPresent(e)&&e.length||(this.selectedDataItems=[]),this.valuePrimitive&&!this.valueField&&(this.selectedDataItems=e.slice()),(t||this.valuePrimitive&&this.valueField)&&(this.selectedDataItems=h.resolveAllValues(e,n,this.valueField)),this.selectedDataItems.length<e.length)&&(a=this.prop(this.valueField,this.valuePrimitive),o=e.map(function(t){var e=i.selectedDataItems.find(function(e){return a(e)===a(t)});return h.isPresent(e)?e:i.resolveDataItemFromTags(t)}).filter(function(e){return h.isPresent(e)}),this.selectedDataItems=o),this.tags=this.tagMapper(this.selectedDataItems.slice(0)),this.cdr.markForCheck()},R.prototype.handleFilter=function(e){(this.text=e)&&!this.isOpen&&this.openPopup(),this.filterable?this.filterChange.emit(e):this.searchTextAndFocus(e),this.searchbar.setInputSize()},R.prototype.pageChange=function(e){this.virtual.skip=e.skip},R.prototype.clearFilter=function(){this.filterable&&this.text&&this.filterChange.emit(""),this.text="",this.searchbar.input.nativeElement.value="",this.searchbar.setInputSize()},R.prototype.handleNavigate=function(e){var t,i,n,a=this.text&&e.keyCode!==c.Keys.down&&e.keyCode!==c.Keys.up,o=this.text&&e.keyCode===c.Keys.enter||e.keyCode===c.Keys.esc;!this.text&&e.keyCode===c.Keys.backspace&&0<this.tags.length?this.handleBackspace():this.disabled||a&&!o||(t=e,i=isNaN(this.selectionService.focused)?-1:this.selectionService.focused,(n=this.navigationService.process({current:i,max:this.dataService.itemsCount-1,min:this.allowCustom&&this.text?-1:0,open:this.isOpen,originalEvent:t}))!==u.NavigationAction.Undefined&&(n===u.NavigationAction.Enter&&this.isOpen||n!==u.NavigationAction.Enter)&&e.preventDefault())},R.prototype.handleRemoveTag=function(e){var t=new P.RemoveTagEvent(e);this.disabled||this.readonly||(this.focus(),this.removeTag.emit(t),t.isDefaultPrevented()||(e instanceof Array?this.removeGroupTag(e):this.removeSingleTag(e),this.cdr.detectChanges()))},R.prototype.clearAll=function(e){e.stopImmediatePropagation(),e.preventDefault(),this.focus(),this.clearFilter(),this.reset(),this.emitValueChange()},R.prototype.addCustomValue=function(e){this.customValueSubject.next(e)},R.prototype.ngAfterContentChecked=function(){this.verifySettings()},R.prototype.ngDoCheck=function(){var t=this;if(this.differ){var e=this.differ.diff(this.value);if(e&&!this.valueChangeDetected){if(this.selectedDataItems=this.getSelectedDataItems(e),this.tags=this.tagMapper(this.selectedDataItems.slice(0)),!this.tags||!this.dataService.data)return;this.selectedDataItems.some(function(e){return!(-1===t.dataService.indexOf(e)||t.selectionService.isSelected(t.dataService.indexOf(e)))})&&this.setState(this.value)}}this.valueChangeDetected=!1},R.prototype.ngOnInit=function(){var i=this;this.renderer.removeAttribute(this.hostElement.nativeElement,"tabindex"),this.createCustomValueStream(),this.localizationChangeSubscription=this.localization.changes.subscribe(function(e){var t=e.rtl;i.direction=t?"rtl":"ltr",i.setMessages()}),this.setMessages()},R.prototype.ngOnChanges=function(e){var t=this.virtual;t&&e.data&&e.data.isFirstChange()&&this.pageChange({skip:0,take:t.pageSize}),void 0===this.valuePrimitive&&(this.valuePrimitive=!this.valueField),r.isChanged("valueNormalizer",e)&&this.createCustomValueStream(),e.hasOwnProperty("value")&&(this.valueChangeDetected=!0),/(data|textField|valueField|valuePrimitive|value)/g.test(Object.keys(e).join())&&this.setState(this.value)},R.prototype.ngAfterViewInit=function(){this.searchbar.setInputSize()},R.prototype.ngOnDestroy=function(){this._toggle(!1),this.unsubscribeEvents(),clearTimeout(this.messagesTimeout),this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe()},R.prototype.toggle=function(t){var i=this;Promise.resolve(null).then(function(){var e=h.isPresent(t)?t:!i._open;i._toggle(e),i.cdr.markForCheck()})},Object.defineProperty(R.prototype,"isOpen",{get:function(){return this._open},enumerable:!0,configurable:!0}),R.prototype.reset=function(){this.text="",this.value=[],this.selectedDataItems=[],this.setState([]),this.cdr.markForCheck()},R.prototype.writeValue=function(e){this.value=e||[],this.setState(this.value),this.verifySettings()},R.prototype.registerOnChange=function(e){this.onChangeCallback=e},R.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},R.prototype.setDisabledState=function(e){this.disabled=e},R.prototype.onTagMapperChange=function(){this.tags=this.tagMapper(this.selectedDataItems.slice(0)),this.cdr.markForCheck()},R.prototype.prop=function(t,i){return function(e){return h.isPresent(e)?!i||t&&h.isObject(e)?e[t]:e:null}},Object.defineProperty(R.prototype,"isFocused",{get:function(){return this._isFocused},set:function(e){this.renderer[e?"addClass":"removeClass"](this.hostElement.nativeElement,"k-state-focused"),this._isFocused=e},enumerable:!0,configurable:!0}),R.prototype.subscribeEvents=function(){var e,t,i,n=this;r.isDocumentAvailable()&&(e=function(){return n.isOpen},t=function(){return!n.isOpen},i=function(){return!n.isOpen&&void 0!==n.focusedTagIndex},[this.selectionService.onChange.subscribe(this.handleItemChange.bind(this)),this.navigationService.esc.subscribe(this.closePopup.bind(this)),this.navigationService.enter.pipe(g.filter(e)).subscribe(this.handleEnter.bind(this)),this.navigationService.open.subscribe(this.openPopup.bind(this)),this.navigationService.close.subscribe(this.handleClose.bind(this)),this.navigationService.up.pipe(g.filter(e)).subscribe(function(e){return n.handleUp(e.index)}),this.navigationService.home.pipe(g.filter(function(){return t})).subscribe(this.handleHome.bind(this)),this.navigationService.end.pipe(g.filter(function(){return t})).subscribe(this.handleEnd.bind(this)),this.navigationService.backspace.pipe(g.filter(i)).subscribe(this.handleBackspace.bind(this)),this.navigationService.delete.pipe(g.filter(i)).subscribe(this.handleDelete.bind(this)),this.navigationService.left.subscribe("rtl"===this.direction?this.handleRightKey.bind(this):this.handleLeftKey.bind(this)),this.navigationService.right.subscribe("rtl"===this.direction?this.handleLeftKey.bind(this):this.handleRightKey.bind(this)),this.navigationService.down.subscribe(function(e){return n.handleDownKey(e.index)})].forEach(function(e){return n.observableSubscriptions.add(e)}))},R.prototype.unsubscribeEvents=function(){r.isDocumentAvailable()&&(this.observableSubscriptions.unsubscribe(),this.customValueSubscription&&this.customValueSubscription.unsubscribe())},R.prototype.removeGroupTag=function(e){var t=this.prop(this.valueField,this.valuePrimitive),i=this.dataService.data;this.dataService.grouped&&(i=i.filter(function(e){return!e.header}).map(function(e){return e.value}));var n=new Set(e.map(function(e){return t(e)}));this.value=this.value.filter(function(e){return!n.has(t(e))}),this.selectedDataItems=this.selectedDataItems.filter(function(e){return!n.has(t(e))});var a=h.selectedIndices(this.value,i,this.valueField);this.selectionService.resetSelection(a),this.tags=this.tagMapper(this.selectedDataItems.slice(0)),this.cdr.markForCheck(),this.emitValueChange()},R.prototype.removeSingleTag=function(t){var i=this.prop(this.valueField,this.valuePrimitive),e=this.dataService.data;this.dataService.grouped&&(e=e.filter(function(e){return!e.header}).map(function(e){return e.value}));var n,a=h.selectedIndices([t],e,this.valueField)[0];h.isNumber(a)?(this.selectionService.unselect(a),this.togglePopup(!1)):(n=function(e){return i(e)!==i(t)},this.value=this.value.filter(n),this.selectedDataItems=this.selectedDataItems.filter(n),this.tags=this.tagMapper(this.selectedDataItems.slice(0)),this.cdr.markForCheck(),this.emitValueChange())},R.prototype.createCustomValueStream=function(){var a=this;this.customValueSubscription&&this.customValueSubscription.unsubscribe(),this.customValueSubscription=this.customValueSubject.pipe(g.tap(function(){a.loading=!0,a.disabled=!0,a.cdr.detectChanges()}),this.valueNormalizer,g.catchError(function(){return a.loading=!1,a.disabled=!1,a.clearFilter(),a.autoClose&&(a.togglePopup(!1),a.nextTick(function(){a.searchbar.focus()})),a.createCustomValueStream(),v.of(null)})).subscribe(function(e){var t,i,n;a.loading=!1,a.disabled=!1,a.clearFilter(),h.isPresent(e)&&(t=a.valuePrimitive?h.getter(e,a.valueField):e,n=-1===(i=a.dataService.indexOf(t)),-1===a.value.indexOf(t)?(n?a.value=a.value.concat([t]):a.selectionService.add(i),a.selectedDataItems=a.selectedDataItems.concat([e])):!n&&a.selectionService.isSelected(i)?a.selectionService.unselect(i):(a.value.splice(a.value.indexOf(t),1),a.selectedDataItems=a.selectedDataItems.filter(function(e){return h.getter(e,a.valueField)!==t})),a.tags=a.tagMapper(a.selectedDataItems.slice(0)),a.emitValueChange()),a.autoClose&&(a.togglePopup(!1),a.nextTick(function(){a.searchbar.focus()}))})},R.prototype.handleItemChange=function(e){this.change(e),this.autoClose&&this.togglePopup(!1),h.isPresent(e.added)&&-1!==e.added&&this.clearFilter()},R.prototype.handleEnter=function(e){var t=this.selectionService,i=this.selectionService.focused;this.isOpen&&e.originalEvent.preventDefault(),-1!==i?(t.isSelected(i)?t.unselect(i):t.add(i),this.clearFilter(),this.autoClose&&this.togglePopup(!1)):this.allowCustom&&this.text&&this.addCustomValue(this.text)},R.prototype.handleClose=function(){this.closePopup(),this.searchbar.focus()},R.prototype.handleEnd=function(){this.focusedTagIndex=this.tags.length-1},R.prototype.handleHome=function(){this.focusedTagIndex=0},R.prototype.handleUp=function(e){this.selectionService.focused=e},R.prototype.handleBackspace=function(){void 0!==this.focusedTagIndex?this.handleDelete():(this.handleRemoveTag(this.tags[this.tags.length-1]),this.searchbar.focus())},R.prototype.handleDelete=function(){this.handleRemoveTag(this.tags[this.focusedTagIndex]),this.focusedTagIndex===this.tags.length&&(this.focusedTagIndex=void 0)},R.prototype.handleLeftKey=function(){void 0===this.focusedTagIndex||this.focusedTagIndex<0?this.focusedTagIndex=this.tags.length-1:0!==this.focusedTagIndex&&this.focusedTagIndex--},R.prototype.handleDownKey=function(e){this.isOpen?this.selectionService.focused=e||this.firstFocusableIndex(0):this.openPopup()},R.prototype.handleRightKey=function(){var e=this.tags.length-1;this.focusedTagIndex===e?this.focusedTagIndex=void 0:this.focusedTagIndex<e&&this.focusedTagIndex++},R.prototype.findIndex=function(t,e){var i,n=this;void 0===e&&(e=0),t=t.toLowerCase();var a=this.dataService.findIndex(function(e){return i=n.dataService.grouped?n.prop(n.textField,n.valuePrimitive)(e.value):n.prop(n.textField,n.valuePrimitive)(e),i=h.isPresent(i)?i.toString().toLowerCase():"",t&&i.startsWith(t)},e);return this.disabledItemsService.isIndexDisabled(a)?a+1>this.dataService.itemsCount?-1:this.findIndex(t,a+1):a},R.prototype.searchTextAndFocus=function(e){var t=this.findIndex(e);this.selectionService.focused=t},R.prototype.closePopup=function(){this.togglePopup(!1),this.focusedTagIndex=void 0},R.prototype.openPopup=function(){this.togglePopup(!0),this.focusedTagIndex=void 0},R.prototype.togglePopup=function(e){var t=this.disabled||this.readonly,i=this.isOpen===e;t||i||this.triggerPopupEvents(e)||this._toggle(e)},R.prototype.triggerPopupEvents=function(e){var t=new T.PreventableEvent;return e?this.open.emit(t):this.close.emit(t),t.isDefaultPrevented()},R.prototype._toggle=function(e){this._open=e,this.destroyPopup(),this._open&&this.createPopup()},R.prototype.destroyPopup=function(){this.popupRef&&(this.popupRef.popupElement.removeEventListener("mousedown",this.popupMouseDownHandler),this.popupRef.close(),this.popupRef=null)},R.prototype.createPopup=function(){var e=this;this.virtual&&(this.virtual.skip=0);var t="rtl"===this.direction?"right":"left",i={horizontal:t,vertical:"bottom"},n={horizontal:t,vertical:"top"};this.popupRef=this.popupService.open({anchor:this.wrapper,anchorAlign:i,animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupAlign:n,popupClass:this.listContainerClasses,positionMode:"absolute"});var a=this.popupRef.popupElement,o=this.width,r=o.min,s=o.max;a.addEventListener("mousedown",this.popupMouseDownHandler),a.style.minWidth=r,a.style.width=s,a.style.height=this.height,a.setAttribute("dir",this.direction),this.popupRef.popupOpen.subscribe(function(){e.cdr.detectChanges(),e.optionsList.scrollToItem(e.selectionService.focused)}),this.popupRef.popupAnchorViewportLeave.subscribe(function(){e.togglePopup(!1)})},R.prototype.emitValueChange=function(){this.onChangeCallback(this.value),this.valueChange.emit(this.value)},R.prototype.getSelectedDataItems=function(e){var i,n,a=this,o=h.isObjectArray(this.data),r=this.prop(this.valueField,this.valuePrimitive),s=[];return e.forEachItem(function(e){var t;i=e.currentValue,-1!==(n=a.dataService.grouped?a.dataService.findIndex(function(e){return r(e.value)===r(i)}):a.dataService.findIndex(function(e){return r(e)===r(i)}))?s.push(a.dataService.itemAt(n)):!h.isPresent(e)||o&&a.valuePrimitive?(t=a.resolveDataItemFromTags(i),h.isPresent(t)&&s.push(t)):s.push(i)}),s},R.prototype.resolveDataItemFromTags=function(t){if(this.tags&&this.tags.length&&h.isPresent(t)){var e=this.tags.reduce(function(e,t){var i=h.isArray(t)?t:[t];return e.push.apply(e,i),e},[]),i=this.prop(this.valueField,this.valuePrimitive);return e.find(function(e){return i(e)===i(t)})}},R.prototype.firstFocusableIndex=function(e){var t=this.dataService.itemsCount;if(this.disabledItemsService.isIndexDisabled(e)){var i=e+1;return i<t?this.firstFocusableIndex(i):void 0}return e},R.prototype.nextTick=function(e){var t=this;this._zone.runOutsideAngular(function(){setTimeout(function(){return t._zone.run(e)})})},R.prototype.setMessages=function(){var e=this;this._zone.runOutsideAngular(function(){clearTimeout(e.messagesTimeout),e.messagesTimeout=setTimeout(function(){e.noDataText=e.localization.get("noDataText"),e.cdr.detectChanges()})})},a.__decorate([m.Input(),a.__metadata("design:type",String)],R.prototype,"focusableId",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Boolean)],R.prototype,"autoClose",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Boolean)],R.prototype,"loading",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Array),a.__metadata("design:paramtypes",[Array])],R.prototype,"data",null),a.__decorate([m.Input(),a.__metadata("design:type",Array),a.__metadata("design:paramtypes",[Array])],R.prototype,"value",null),a.__decorate([m.Input(),a.__metadata("design:type",String)],R.prototype,"valueField",void 0),a.__decorate([m.Input(),a.__metadata("design:type",String)],R.prototype,"textField",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Number)],R.prototype,"tabindex",void 0),a.__decorate([m.Input("tabIndex"),a.__metadata("design:type",Number),a.__metadata("design:paramtypes",[Number])],R.prototype,"tabIndex",null),a.__decorate([m.Input(),a.__metadata("design:type",String),a.__metadata("design:paramtypes",[String])],R.prototype,"placeholder",null),a.__decorate([m.Input(),a.__metadata("design:type",Boolean)],R.prototype,"disabled",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Function])],R.prototype,"itemDisabled",null),a.__decorate([m.Input(),a.__metadata("design:type",Boolean)],R.prototype,"readonly",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Boolean)],R.prototype,"filterable",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Object),a.__metadata("design:paramtypes",[Object])],R.prototype,"virtual",null),a.__decorate([m.Input(),a.__metadata("design:type",Object),a.__metadata("design:paramtypes",[Object])],R.prototype,"popupSettings",null),a.__decorate([m.Input(),a.__metadata("design:type",Number)],R.prototype,"listHeight",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Boolean)],R.prototype,"valuePrimitive",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Boolean)],R.prototype,"clearButton",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Object)],R.prototype,"tagMapper",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Boolean)],R.prototype,"allowCustom",void 0),a.__decorate([m.Input(),a.__metadata("design:type",Function)],R.prototype,"valueNormalizer",void 0),a.__decorate([m.Output(),a.__metadata("design:type",m.EventEmitter)],R.prototype,"filterChange",void 0),a.__decorate([m.Output(),a.__metadata("design:type",m.EventEmitter)],R.prototype,"valueChange",void 0),a.__decorate([m.Output(),a.__metadata("design:type",m.EventEmitter)],R.prototype,"open",void 0),a.__decorate([m.Output(),a.__metadata("design:type",m.EventEmitter)],R.prototype,"close",void 0),a.__decorate([m.Output("focus"),a.__metadata("design:type",m.EventEmitter)],R.prototype,"onFocus",void 0),a.__decorate([m.Output("blur"),a.__metadata("design:type",m.EventEmitter)],R.prototype,"onBlur",void 0),a.__decorate([m.Output(),a.__metadata("design:type",m.EventEmitter)],R.prototype,"removeTag",void 0),a.__decorate([m.ViewChild("container",{read:m.ViewContainerRef}),a.__metadata("design:type",m.ViewContainerRef)],R.prototype,"container",void 0),a.__decorate([m.ViewChild(o.SearchBarComponent),a.__metadata("design:type",o.SearchBarComponent)],R.prototype,"searchbar",void 0),a.__decorate([m.ViewChild("popupTemplate"),a.__metadata("design:type",m.TemplateRef)],R.prototype,"popupTemplate",void 0),a.__decorate([m.ViewChild("wrapper"),a.__metadata("design:type",m.ElementRef)],R.prototype,"wrapper",void 0),a.__decorate([m.ViewChild("optionsList"),a.__metadata("design:type",A.ListComponent)],R.prototype,"optionsList",void 0),a.__decorate([m.ContentChild(f.ItemTemplateDirective),a.__metadata("design:type",f.ItemTemplateDirective)],R.prototype,"template",void 0),a.__decorate([m.ContentChild(_.CustomItemTemplateDirective),a.__metadata("design:type",_.CustomItemTemplateDirective)],R.prototype,"customItemTemplate",void 0),a.__decorate([m.ContentChild(b.GroupTemplateDirective),a.__metadata("design:type",b.GroupTemplateDirective)],R.prototype,"groupTemplate",void 0),a.__decorate([m.ContentChild(y.FixedGroupTemplateDirective),a.__metadata("design:type",y.FixedGroupTemplateDirective)],R.prototype,"fixedGroupTemplate",void 0),a.__decorate([m.ContentChild(S.HeaderTemplateDirective),a.__metadata("design:type",S.HeaderTemplateDirective)],R.prototype,"headerTemplate",void 0),a.__decorate([m.ContentChild(x.FooterTemplateDirective),a.__metadata("design:type",x.FooterTemplateDirective)],R.prototype,"footerTemplate",void 0),a.__decorate([m.ContentChild(I.TagTemplateDirective),a.__metadata("design:type",I.TagTemplateDirective)],R.prototype,"tagTemplate",void 0),a.__decorate([m.ContentChild(C.GroupTagTemplateDirective),a.__metadata("design:type",C.GroupTagTemplateDirective)],R.prototype,"groupTagTemplate",void 0),a.__decorate([m.ContentChild(D.NoDataTemplateDirective),a.__metadata("design:type",D.NoDataTemplateDirective)],R.prototype,"noDataTemplate",void 0),a.__decorate([m.HostBinding("class.k-widget"),m.HostBinding("class.k-multiselect"),m.HostBinding("class.k-header"),a.__metadata("design:type",Boolean)],R.prototype,"widgetClasses",void 0),a.__decorate([m.HostBinding("attr.dir"),a.__metadata("design:type",String),a.__metadata("design:paramtypes",[])],R.prototype,"dir",null),a.__decorate([m.HostBinding("class.k-state-disabled"),a.__metadata("design:type",Boolean),a.__metadata("design:paramtypes",[])],R.prototype,"disabledClass",null),n=a.__decorate([m.Component({exportAs:"kendoMultiSelect",providers:[B,j.DataService,p.SelectionService,l.NavigationService,d.DisabledItemsService,E.LocalizationService,{provide:E.L10N_PREFIX,useValue:"kendo.multiselect"},{provide:k.FilterableDropDownComponentBase,useExisting:m.forwardRef(function(){return n})},{provide:r.KendoInput,useExisting:m.forwardRef(function(){return n})}],selector:"kendo-multiselect",template:'\n        <ng-container kendoMultiSelectLocalizedMessages\n            i18n-noDataText="kendo.multiselect.noDataText|The text displayed in the popup when there are no items"\n            noDataText="NO DATA FOUND"\n\n            i18n-clearTitle="kendo.combobox.clearTitle|The title of the clear button"\n            clearTitle="clear"\n        >\n        </ng-container>\n        <div class="k-multiselect-wrap k-floatwrap"\n            #wrapper\n            (mousedown)="wrapperMousedown($event)"\n        >\n            <kendo-taglist\n                [id]="tagListId"\n                [tags]="tags"\n                [textField]="textField"\n                [valueField]="valueField"\n                [focused]="focusedTagIndex"\n                [disabled]="disabled"\n                [template]="tagTemplate"\n                [groupTemplate]="groupTagTemplate"\n                [tagPrefix]="tagPrefix"\n                (removeTag)="handleRemoveTag($event)"\n            >\n            </kendo-taglist>\n            <kendo-searchbar\n                #searchbar\n                [id]="focusableId"\n                [role]="\'listbox\'"\n                [tagListId]="tagListId"\n                [activeDescendant]="activeDescendant"\n                [noDataLabel]="noDataLabel"\n                [userInput]="text"\n                [disabled]="disabled"\n                [readonly]="readonly"\n                [tabIndex]="tabIndex"\n                [popupOpen]="isOpen"\n                [placeholder]="placeholder"\n                (onNavigate)="handleNavigate($event)"\n                (valueChange)="handleFilter($event)"\n                (onBlur)="onSearchBarBlur()"\n                (onFocus)="onSearchBarFocus()"\n            >\n            </kendo-searchbar>\n            <span\n                *ngIf="!loading && !readonly && clearButton && (tags?.length || text?.length)"\n                class="k-icon k-clear-value k-i-close"\n                [attr.title]="clearTitle"\n                role="button"\n                tabindex="-1"\n                (mousedown)="clearAll($event)"\n            >\n            </span>\n            <span *ngIf="loading" class="k-icon k-i-loading"></span>\n        </div>\n        <ng-template #popupTemplate>\n            \x3c!--header template--\x3e\n            <ng-template *ngIf="headerTemplate"\n                [templateContext]="{\n                    templateRef: headerTemplate.templateRef\n                }">\n            </ng-template>\n            \x3c!--custom item template--\x3e\n            <div class="k-list" *ngIf="allowCustom && text">\n                <div class="k-item k-custom-item" kendoDropDownsSelectable [multipleSelection]="true" [index]="-1">\n                    <ng-template *ngIf="customItemTemplate;else default_custom_item_template"\n                        [templateContext]="{\n                            templateRef: customItemTemplate.templateRef,\n                            $implicit: text\n                        }">\n                    </ng-template>\n                    <ng-template #default_custom_item_template>{{ text }}</ng-template>\n                    <span class="k-icon k-i-plus" style="float: right"></span>\n                </div>\n            </div>\n            \x3c!--list--\x3e\n            <kendo-list\n                #optionsList\n                [id]="listBoxId"\n                [optionPrefix]="optionPrefix"\n                [data]="data"\n                [textField]="textField"\n                [valueField]="valueField"\n                [height]="listHeight"\n                [template]="template"\n                [groupTemplate]="groupTemplate"\n                [fixedGroupTemplate]="fixedGroupTemplate"\n                [show]="isOpen"\n                [multipleSelection]="true"\n                [virtual]="virtual"\n                (pageChange)="pageChange($event)"\n                >\n            </kendo-list>\n            \x3c!--no data template--\x3e\n            <div class="k-nodata" *ngIf="data.length === 0">\n                <ng-template [ngIf]="noDataTemplate"\n                    [templateContext]="{\n                        templateRef: noDataTemplate ? noDataTemplate.templateRef : undefined\n                    }">\n                </ng-template>\n                <ng-template [ngIf]="!noDataTemplate">\n                    <div>{{ noDataText }}</div>\n                </ng-template>\n            </div>\n            \x3c!--footer template--\x3e\n            <ng-template *ngIf="footerTemplate"\n                [templateContext]="{\n                    templateRef: footerTemplate.templateRef\n                }">\n            </ng-template>\n        </ng-template>\n        <ng-template [ngIf]="isOpen">\n            <kendo-resize-sensor (resize)="onResize()"></kendo-resize-sensor>\n        </ng-template>\n        <ng-container #container></ng-container>\n  '}),a.__param(11,m.Optional()),a.__param(11,m.Inject(F.TOUCH_ENABLED)),a.__metadata("design:paramtypes",[E.LocalizationService,O.PopupService,j.DataService,p.SelectionService,l.NavigationService,d.DisabledItemsService,m.ChangeDetectorRef,m.KeyValueDiffers,m.Renderer2,m.ElementRef,m.NgZone,Boolean])],R));function R(e,t,i,n,a,o,r,s,p,l,u,d){var c=this;this.localization=e,this.popupService=t,this.dataService=i,this.selectionService=n,this.navigationService=a,this.disabledItemsService=o,this.cdr=r,this.differs=s,this.renderer=p,this.hostElement=l,this._zone=u,this.touchEnabled=d,this.listBoxId=h.guid(),this.tagListId=h.guid(),this.tagPrefix="tag-"+h.guid(),this.optionPrefix="option-"+h.guid(),this.focusedTagIndex=void 0,this.focusableId="k-"+h.guid(),this.autoClose=!0,this.tabindex=0,this.disabled=!1,this.readonly=!1,this.filterable=!1,this.listHeight=200,this.clearButton=!0,this.tagMapper=function(e){return e||[]},this.allowCustom=!1,this.valueNormalizer=function(e){return e.pipe(g.map(function(t){function e(e){return"string"==typeof e&&t.toLowerCase()===e.toLowerCase()}var i=c.value.find(e);return i||(c.dataService.find(e)||t)}))},this.filterChange=new m.EventEmitter,this.valueChange=new m.EventEmitter,this.open=new m.EventEmitter,this.close=new m.EventEmitter,this.onFocus=new m.EventEmitter,this.onBlur=new m.EventEmitter,this.removeTag=new m.EventEmitter,this.widgetClasses=!0,this.onChangeCallback=function(e){},this.onTouchedCallback=function(e){},this._placeholder="",this._open=!1,this._value=[],this._popupSettings={animate:!0},this._isFocused=!1,this.selectedDataItems=[],this.customValueSubject=new v.Subject,this.observableSubscriptions=new v.Subscription,this.popupMouseDownHandler=this.onMouseDown.bind(this),this.data=[],this.direction=this.localization.rtl?"rtl":"ltr",this.subscribeEvents()}t.MultiSelectComponent=N},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:"[kendoDropDownListValueTemplate]"}),n.__metadata("design:paramtypes",[a.TemplateRef])],function(e){this.templateRef=e});t.ValueTemplateDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiselectMessages={array:"Expected values of array type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection",object:"Expected values of Object type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection",primitive:"Expected values of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#value-selection",textAndValue:"Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/multiselect/#toc-bind-to-arrays-of-complex-data"},t.ComboBoxMessages={object:"Expected value of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-value-selection",primitive:"Expected value of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-value-selection",textAndValue:"Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/combobox/#toc-bind-to-arrays-of-complex-data",noItemHeight:"Expected virtual.itemHeight of type number."},t.DropDownListMessages={defaultItem:"defaultItem and data items must be of same type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/api/DropDownListComponent/#toc-defaultitem",object:"Expected value of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-value-selection",primitive:"Expected value of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-value-selection",textAndValue:"Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-bind-to-arrays-of-complex-data"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(32),r=i(45),s=i(30),p=i(31),l=i(26),u=i(42),d=i(17),c=i(9),h=i(18),m=i(37),v=[o.MultiSelectComponent,r.TagListComponent,s.TagTemplateDirective,l.GroupTagTemplateDirective,u.SummaryTagDirective,p.CustomItemTemplateDirective],g=n.__decorate([a.NgModule({declarations:[v],exports:[v,c.SharedDirectivesModule],imports:[d.SharedModule],providers:[{provide:h.TOUCH_ENABLED,useValue:m.touchEnabled}]})],function(){});t.MultiSelectModule=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(46),r=i(33),s=i(50),p=i(17),l=i(9),u=[o.DropDownListComponent,r.ValueTemplateDirective,s.FilterInputDirective],d=n.__decorate([a.NgModule({declarations:[u],exports:[u,l.SharedDirectivesModule],imports:[p.SharedModule]})],function(){});t.DropDownListModule=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function o(e,t,i){for(var n in t)if(t.hasOwnProperty(n)&&t[n].test(e))return n;return void 0!==i?i:e}var n=i(2),r={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},s={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},a={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i},p={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};t.detectMobileOS=function(e){var t,i,n=[];for(i in r)if(r.hasOwnProperty(i)){if(!(n=e.match(r[i])))continue;if("windows"===i&&"plugins"in window.navigator)return null;var a={};return a.device=i,a.browser=o(e,p,"default"),a.name=o(i,s),a[a.name]=!0,a.majorVersion=n[2],a.minorVersion=n[3].replace("_","."),t=a.minorVersion.replace(".","").substr(0,2),a.flatVersion=a.majorVersion+t+new Array(3-(t.length<3?t.length:2)).join("0"),a.cordova=(window.PhoneGap,!0),a.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||a.cordova,a}return null},t.detectDesktopBrowser=function(e){var t,i=null,n=[];for(t in a)if(a.hasOwnProperty(t)&&(n=e.match(a[t]))){(i={})[t]=!0,i[n[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,i.version=parseInt(document.documentMode||n[2],10);break}return i};var l=n.isWindowAvailable()&&window.navigator?window.navigator.userAgent:null;t.browser=l?t.detectDesktopBrowser(l):null,t.mobileOS=l?t.detectMobileOS(l):null,t.touch=n.isWindowAvailable()&&"ontouchstart"in window,t.msPointers=t.browser&&!t.browser.chrome&&window.MSPointerEvent,t.pointers=t.browser&&!t.browser.chrome&&window.PointerEvent,t.touchEnabled=t.mobileOS&&(t.touch||t.msPointers||t.pointers)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(47),r=i(17),s=i(9),p=i(18),l=i(37),u=[o.ComboBoxComponent],d=n.__decorate([a.NgModule({declarations:[u],exports:[u,s.SharedDirectivesModule],imports:[r.SharedModule],providers:[{provide:p.TOUCH_ENABLED,useValue:l.touchEnabled}]})],function(){});t.ComboBoxModule=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(0),o=i(1),r=(n=i(3).ComponentMessages,a.__extends(s,n),a.__decorate([o.Input(),a.__metadata("design:type",String)],s.prototype,"noDataText",void 0),a.__decorate([o.Input(),a.__metadata("design:type",String)],s.prototype,"clearTitle",void 0),s);function s(){return null!==n&&n.apply(this,arguments)||this}t.Messages=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(49),r=i(17),s=i(9),p=[o.AutoCompleteComponent],l=n.__decorate([a.NgModule({declarations:[p],exports:[p,s.SharedDirectivesModule],imports:[r.SharedModule]})],function(){});t.AutoCompleteModule=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(19),r=i(2),s={caseSensitive:!1,operator:"startsWith"},p=(Object.defineProperty(l.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e||[]},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"filterSettings",{get:function(){return this._filterSettings},set:function(e){this._filterSettings=Object.assign({},s,e)},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){var t=this;this.component.filterable=this.filterable,this.filterChangeSubscription=this.component.filterChange.subscribe(function(e){return t.component.data=t.getFilteredData(e)})},l.prototype.ngOnDestroy=function(){this.filterChangeSubscription.unsubscribe()},l.prototype.getFilteredData=function(t){var i=this,n=this.component.textField||this.component.valueField;return this.data.filter(function(e){return i.checkItem(r.getter(e,n),t)})},l.prototype.checkItem=function(e,t){return e=this.normalizeValue(e),t=this.normalizeValue(t),"contains"===this.filterSettings.operator?-1!==e.indexOf(t):0===e.indexOf(t)},l.prototype.normalizeValue=function(e){var t=r.isPresent(e)?e.toString():"";return this.filterSettings.caseSensitive?t:t.toLowerCase()},n.__decorate([a.Input(),n.__metadata("design:type",Array),n.__metadata("design:paramtypes",[Array])],l.prototype,"data",null),n.__decorate([a.Input("kendoDropDownFilter"),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],l.prototype,"filterSettings",null),n.__decorate([a.Input(),n.__metadata("design:type",Boolean)],l.prototype,"filterable",void 0),n.__decorate([a.Directive({selector:"[kendoDropDownFilter]"}),n.__metadata("design:paramtypes",[o.FilterableDropDownComponentBase])],l));function l(e){this.component=e,this.filterable=!0,this._data=[],this._filterSettings=s}t.FilterDirective=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(2),r=i(32),s=(p.prototype.ngOnChanges=function(e){o.isPresent(e.showAfter)&&(this.createTagMapper(),this.multiSelectComponent.onTagMapperChange())},p.prototype.createTagMapper=function(){var i=this;this.multiSelectComponent.tagMapper=function(e){if(e.length>i.showAfter){var t=void 0;return(t=e.slice(0,i.showAfter)).push(e.slice(i.showAfter,e.length)),t}return e}},n.__decorate([a.Input("kendoMultiSelectSummaryTag"),n.__metadata("design:type",Number)],p.prototype,"showAfter",void 0),n.__decorate([a.Directive({selector:"[kendoMultiSelectSummaryTag]"}),n.__metadata("design:paramtypes",[r.MultiSelectComponent])],p));function p(e){this.multiSelectComponent=e,this.showAfter=0,this.createTagMapper()}t.SummaryTagDirective=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(5),r=(Object.defineProperty(s.prototype,"focusedClassName",{get:function(){return this.selectionService.isFocused(this.index)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectedClassName",{get:function(){return this.selectionService.isSelected(this.index)},enumerable:!0,configurable:!0}),s.prototype.onClick=function(e){e.stopPropagation(),this.multipleSelection?this.selectionService.isSelected(this.index)?this.selectionService.unselect(this.index):this.selectionService.add(this.index):this.selectionService.change(this.index)},n.__decorate([a.HostBinding("attr.index"),a.Input(),n.__metadata("design:type",Number)],s.prototype,"index",void 0),n.__decorate([a.HostBinding("style.height.px"),a.HostBinding("style.minHeight.px"),a.Input(),n.__metadata("design:type",Number)],s.prototype,"height",void 0),n.__decorate([a.Input(),n.__metadata("design:type",Boolean)],s.prototype,"multipleSelection",void 0),n.__decorate([a.HostBinding("class.k-state-focused"),n.__metadata("design:type",Boolean),n.__metadata("design:paramtypes",[])],s.prototype,"focusedClassName",null),n.__decorate([a.HostBinding("class.k-state-selected"),n.__metadata("design:type",Boolean),n.__metadata("design:paramtypes",[])],s.prototype,"selectedClassName",null),n.__decorate([a.HostListener("click",["$event"]),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Object]),n.__metadata("design:returntype",void 0)],s.prototype,"onClick",null),n.__decorate([a.Directive({selector:"[kendoDropDownsSelectable]"}),n.__metadata("design:paramtypes",[o.SelectionService])],s));function s(e){this.multipleSelection=!1,this.selectionService=e}t.SelectableDirective=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=(Object.defineProperty(r.prototype,"templateContext",{set:function(e){this.insertedViewRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.insertedViewRef)),this.insertedViewRef=void 0),e.templateRef&&(this.insertedViewRef=this.viewContainerRef.createEmbeddedView(e.templateRef,e))},enumerable:!0,configurable:!0}),n.__decorate([a.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],r.prototype,"templateContext",null),n.__decorate([a.Directive({selector:"[templateContext]"}),n.__metadata("design:paramtypes",[a.ViewContainerRef])],r));function r(e){this.viewContainerRef=e}t.TemplateContextDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(30),r=i(26),s=i(2),p=(l.prototype.tagProp=function(e,t){return t&&s.isObject(e)?e[t]:e},l.prototype.deleteTag=function(e,t){e.preventDefault(),e.stopImmediatePropagation(),this.disabled||1!==e.which||this.removeTag.emit(t)},l.prototype.itemId=function(e){if(e)return this.tagPrefix+"-"+this.tagProp(e,this.valueField)},l.prototype.isGroupTag=function(e){return e instanceof Array},n.__decorate([a.Input(),n.__metadata("design:type",Array)],l.prototype,"tags",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String)],l.prototype,"textField",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String)],l.prototype,"valueField",void 0),n.__decorate([a.Input(),n.__metadata("design:type",Number)],l.prototype,"focused",void 0),n.__decorate([a.Input(),n.__metadata("design:type",o.TagTemplateDirective)],l.prototype,"template",void 0),n.__decorate([a.Input(),n.__metadata("design:type",r.GroupTagTemplateDirective)],l.prototype,"groupTemplate",void 0),n.__decorate([a.Input(),n.__metadata("design:type",Boolean)],l.prototype,"disabled",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String)],l.prototype,"tagPrefix",void 0),n.__decorate([a.Input(),n.__metadata("design:type",String)],l.prototype,"id",void 0),n.__decorate([a.Output(),n.__metadata("design:type",a.EventEmitter)],l.prototype,"removeTag",void 0),n.__decorate([a.Component({selector:"kendo-taglist",template:'\n        <ul [attr.id]="id" class="k-reset">\n            <li role="option" *ngFor="let tag of tags; let i = index;" aria-selected="true" [attr.aria-setsize]="tags?.length"\n                class="k-button" [ngClass]="{ \'k-state-focused\': i === focused }" [attr.id]="itemId(tag)"\n            >\n                <ng-template *ngIf="isGroupTag(tag); then groupTag else singleTag"></ng-template>\n                    <ng-template #groupTag>\n                        <span>\n                            <ng-template *ngIf="groupTemplate"\n                                [templateContext]="{\n                                templateRef: groupTemplate.templateRef,\n                                $implicit: tag\n                            }">\n                            </ng-template>\n                            <ng-template [ngIf]="!groupTemplate">{{ tag.length }} {{ tag.length === 1 ? \'item\' : \'items\' }} selected</ng-template>\n                        </span>\n                    </ng-template>\n                    <ng-template #singleTag>\n                        <span>\n                        <ng-template *ngIf="template"\n                                [templateContext]="{\n                                templateRef: template.templateRef,\n                                $implicit: tag\n                            }">\n                            </ng-template>\n                            <ng-template [ngIf]="!template">{{ tagProp(tag, textField) }}</ng-template>\n                        </span>\n                    </ng-template>\n\n                <span aria-label="delete" [attr.aria-hidden]="i !== focused" class="k-select">\n                    <span class="k-icon k-i-close" (mousedown)="deleteTag($event, tag)">\n                    </span>\n                </span>\n            </li>\n        </ul>\n  '})],l));function l(){this.removeTag=new a.EventEmitter}t.TagListComponent=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),d=i(1),a=i(25),c=i(22),r=i(21),s=i(4),u=i(24),h=i(2),o=i(5),p=i(28),l=i(8),m=i(7),v=i(6),g=i(33),f=i(16),_=i(15),b=i(20),y=i(23),S=i(12),x=i(3),I=i(11),C=i(18),D=i(34),w=i(14),T=i(13),P=i(19),E=i(10),O=i(27);t.DROPDOWNLIST_VALUE_ACCESSOR={multi:!0,provide:a.NG_VALUE_ACCESSOR,useExisting:d.forwardRef(function(){return F})};var k,F=(k=j,Object.defineProperty(j.prototype,"width",{get:function(){var e=s.isDocumentAvailable()?this.wrapper.nativeElement.offsetWidth:0,t=this.popupSettings.width||e;return{min:isNaN(e)?e:e+"px",max:isNaN(t)?t:t+"px"}},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"height",{get:function(){var e=this.popupSettings.height;return h.isPresent(e)?e+"px":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"widgetTabIndex",{get:function(){if(!this.disabled){var e=Number(this.tabIndex);return isNaN(e)?0:e}},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"ariaExpanded",{get:function(){return this.isOpen},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"ariaOwns",{get:function(){if(this.isOpen)return this.listBoxId},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"ariaActivedescendant",{get:function(){if(h.isPresent(this.dataItem))return this.optionPrefix+"-"+h.getter(this.dataItem,this.valueField)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"noDataLabel",{get:function(){if(0===this.dataService.itemsCount)return this.noDataText},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"appendTo",{get:function(){var e=this.popupSettings.appendTo;if(e&&"root"!==e)return"component"===e?this.container:e},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"data",{get:function(){var e=this.virtual;if(e){var t=e.skip||0,i=t+e.pageSize;return e.total=this.dataService.data.length,this.dataService.data.slice(t,i)}return this.dataService.data},set:function(e){this.dataService.data=e||[],this.virtual&&(this.virtual.skip=0),this.setState()},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.cdr.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"popupSettings",{get:function(){return this._popupSettings},set:function(e){this._popupSettings=Object.assign({animate:!0},e)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"itemDisabled",{set:function(e){if("function"!=typeof e)throw new Error("itemDisabled must be a function, but received "+JSON.stringify(e)+".");this.disabledItemsService.itemDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"virtual",{get:function(){return this._virtualSettings},set:function(e){this._virtualSettings=O.normalizeVirtualizationSettings(e)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"tabIndex",{get:function(){return this.tabindex},set:function(e){this.tabindex=e},enumerable:!0,configurable:!0}),j.prototype.blurComponent=function(){this.wrapperBlurred.emit()},j.prototype.blurFilterInput=function(){this.filterBlurred.emit()},j.prototype.focusComponent=function(){var e=this;this.wrapperFocused.emit(),this.isFocused||(this.isFocused=!0,s.hasObservers(this.onFocus)&&this._zone.run(function(){e.onFocus.emit()}))},j.prototype.keydown=function(e){var t,i,n,a,o,r,s=h.isPresent(this.defaultItem)?-1:0,p=isNaN(this.selectionService.focused)?this.firstFocusableIndex(s):this.selectionService.focused,l=0;this.disabled||this.readonly||(t=e.keyCode===u.Keys.home||e.keyCode===u.Keys.end,this.filterable&&this.isFocused&&this.isOpen&&t||(i=h.isPresent(this.selectionService.selected[0]),n=h.isPresent(this.selectionService.focused)&&!this.selectionService.isSelected(this.selectionService.focused),i&&!n||(e.keyCode===u.Keys.down||e.keyCode===u.Keys.right?l=-1:e.keyCode!==u.Keys.up&&e.keyCode!==u.Keys.left||(l=1)),a=e,r=(o=this.navigationService.process({current:p+l,max:this.dataService.itemsCount-1,min:this.defaultItem?-1:0,originalEvent:a}))===y.NavigationAction.Left||o===y.NavigationAction.Right,o===y.NavigationAction.Undefined||o===y.NavigationAction.Tab||o===y.NavigationAction.Backspace||o===y.NavigationAction.Delete||r&&this.filterable||o===y.NavigationAction.Enter||a.preventDefault()))},j.prototype.keypress=function(e){this.disabled||this.readonly||this.filterable||this.onKeyPress(e)},j.prototype.click=function(){this.focus(),this.togglePopup(!this.isOpen)},j.prototype.onResize=function(){var e,t,i,n;this._open&&(e=this.popupRef.popupElement,i=(t=this.width).min,n=t.max,e.style.minWidth=i,e.style.width=n)},Object.defineProperty(j.prototype,"dir",{get:function(){return this.direction},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"isFocused",{get:function(){return this._isFocused},set:function(e){this.renderer[e?"addClass":"removeClass"](this.wrapper.nativeElement,"k-state-focused"),this._isFocused=e},enumerable:!0,configurable:!0}),j.prototype.ngOnInit=function(){var i=this;this.renderer.removeAttribute(this.hostElement.nativeElement,"tabindex"),this.localizationChangesSubscription=this.localization.changes.subscribe(function(e){var t=e.rtl;i.direction=t?"rtl":"ltr",i.setMessages()}),this.setMessages(),this.assignAriaDescribedBy()},j.prototype.isEmpty=function(){var e=this.value;return!(0===e||!1===e||e||this.defaultItem)},j.prototype.onFilterFocus=function(){this.filterFocused.emit()},j.prototype.ngOnDestroy=function(){this.destroyPopup(),this.unsubscribeEvents(),clearTimeout(this.messagesTimeout),this.localizationChangesSubscription&&this.localizationChangesSubscription.unsubscribe()},j.prototype.ngOnChanges=function(e){var t=this.virtual;t&&e.data&&e.data.isFirstChange()&&this.pageChange({skip:0,take:t.pageSize}),void 0===this.valuePrimitive&&(this.valuePrimitive=!this.valueField),e.hasOwnProperty("value")&&(this.verifySettings(e.value.currentValue),h.isPresent(this.value)||(this._previousDataItem=void 0)),e.hasOwnProperty("defaultItem")&&(this.disabledItemsService.defaultItem=this.defaultItem),/(value|textField|valueField|valuePrimitive|defaultItem|itemDisabled)/g.test(Object.keys(e).join())&&this.setState()},j.prototype.focus=function(){this.disabled||this.wrapper.nativeElement.focus()},j.prototype.blur=function(){this.disabled||this.wrapper.nativeElement.blur()},j.prototype.toggle=function(t){var i=this;Promise.resolve(null).then(function(){var e=h.isPresent(t)?t:!i._open;i._toggle(e)})},j.prototype._toggle=function(e){this._open=e,this.destroyPopup(),this._open&&this.createPopup()},j.prototype.triggerPopupEvents=function(e){var t=new S.PreventableEvent;return e?this.open.emit(t):this.close.emit(t),t.isDefaultPrevented()},j.prototype.togglePopup=function(e){var t=this.disabled||this.readonly,i=this.isOpen===e;t||i||this.triggerPopupEvents(e)||(!e&&this.filterable&&this.isFocused&&this.focus(),this._toggle(e))},Object.defineProperty(j.prototype,"isOpen",{get:function(){return this._open},enumerable:!0,configurable:!0}),j.prototype.reset=function(){this._previousDataItem=void 0,this.value=void 0,this.setState()},j.prototype.writeValue=function(e){this.verifySettings(e),this.value=null===e?void 0:e,h.isPresent(e)||(this._previousDataItem=void 0),this.setState()},j.prototype.registerOnChange=function(e){this.onChangeCallback=e},j.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},j.prototype.setDisabledState=function(e){this.disabled=e},Object.defineProperty(j.prototype,"buttonClasses",{get:function(){return this.loading?"k-i-loading":this.iconClass||"k-i-arrow-s"},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"listContainerClasses",{get:function(){var e=["k-list-container","k-reset"];return this.popupSettings.popupClass&&e.push(this.popupSettings.popupClass),e},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"isDisabledDefaultItem",{get:function(){return this.disabledItemsService.isItemDisabled(this.defaultItem)},enumerable:!0,configurable:!0}),j.prototype.getText=function(){return this.text},j.prototype.getDefaultItemText=function(){return h.getter(this.defaultItem,this.textField)},j.prototype.createPopup=function(){var e=this;this.virtual&&(this.virtual.skip=0);var t="rtl"===this.direction?"right":"left",i={horizontal:t,vertical:"bottom"},n={horizontal:t,vertical:"top"};this.popupRef=this.popupService.open({anchor:this.wrapper,anchorAlign:i,animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupAlign:n,popupClass:this.listContainerClasses,positionMode:"absolute"});var a=this.popupRef.popupElement,o=this.width,r=o.min,s=o.max;a.addEventListener("mousedown",this.popupMouseDownHandler),a.style.minWidth=r,a.style.width=s,a.style.height=this.height,a.setAttribute("dir",this.direction),this.popupRef.popupOpen.subscribe(function(){e.cdr.detectChanges(),e.optionsList.scrollToItem(e.selectionService.focused)}),this.filterable||this.popupRef.popupAnchorViewportLeave.subscribe(function(){return e.togglePopup(!1)})},j.prototype.destroyPopup=function(){this.popupRef&&(this.popupRef.popupElement.removeEventListener("mousedown",this.popupMouseDownHandler),this.popupRef.close(),this.popupRef=null)},j.prototype.updateState=function(e){var t=e.dataItem,i=e.confirm,n=void 0!==i&&i;this.dataItem=t,this.text=this.prop(this.textField,this.valuePrimitive)(t),n&&(this._previousDataItem=t)},j.prototype.clearState=function(){this.text=void 0,this.dataItem=void 0},j.prototype.resetSelection=function(e){var t=!h.isPresent(e);this.selectionService.resetSelection(t?[]:[e]),this.selectionService.focused=t?this.firstFocusableIndex(0):e},j.prototype.onSelectionChange=function(e){var t=e.dataItem;this.updateState({dataItem:t}),this.selectionChange.emit(t),this.assignAriaDescribedBy()},j.prototype.subscribeEvents=function(){var o=this;s.isDocumentAvailable()&&(this.selectionSubscription.add(this.selectionService.onSelect.pipe(r.filter(function(e){return o.isOpen}),r.map(this.itemFromEvent.bind(this))).subscribe(this.onSelectionChange.bind(this))),this.selectionSubscription.add(c.merge(this.selectionService.onSelect.pipe(r.filter(function(e){return!o.isOpen})),this.selectionService.onChange).pipe(r.map(this.itemFromEvent.bind(this)),r.tap(function(e){return o.togglePopup(!1)})).subscribe(function(e){var t=e.dataItem,i=e.value;e.newSelection&&o.onSelectionChange({dataItem:t});var n=!h.isPresent(t)&&o._previousDataItem,a=i!==o.prop(o.valueField,o.valuePrimitive)(o.value);n?(o.updateState({dataItem:o._previousDataItem}),o.resetSelection()):a&&(o.value=o.valuePrimitive?i:t,o._previousDataItem=t,o.emitChange(o.value)),o.clearFilter()})),this.navigationSubscription=c.merge(this.navigationService.up,this.navigationService.down,this.navigationService.left.pipe(r.skipWhile(function(){return o.filterable})),this.navigationService.right.pipe(r.skipWhile(function(){return o.filterable})),this.navigationService.home,this.navigationService.end).pipe(r.filter(function(e){return!isNaN(e.index)})).subscribe(function(e){return o.selectionService.select(e.index)}),this.openSubscription=this.navigationService.open.subscribe(function(){return o.togglePopup(!0)}),this.closeSubscription=this.navigationService.close.subscribe(function(){o.togglePopup(!1),o.focus()}),this.enterSubscription=this.navigationService.enter.pipe(r.tap(function(e){return e.originalEvent.preventDefault()})).subscribe(this.handleEnter.bind(this)),this.escSubscription=this.navigationService.esc.subscribe(this.handleEscape.bind(this)),this.filterBlurredSubscription=this.filterBlurred.pipe(r.concatMap(function(){return c.interval(10).pipe(r.take(1),r.takeUntil(o.wrapperFocused))})).subscribe(function(){o.wrapperBlurred.emit()}),this._zone.runOutsideAngular(function(){o.componentBlurredSubscription=c.merge(o.wrapperBlurred.pipe(r.concatMap(function(){return c.interval(10).pipe(r.take(1),r.takeUntil(o.filterFocused))})),o.navigationService.tab).pipe(r.tap(function(e){return e instanceof p.NavigationEvent&&o.focus()}),r.filter(function(){return o.isFocused})).subscribe(function(){return o.componentBlur()})}))},j.prototype.unsubscribeEvents=function(){s.isDocumentAvailable()&&(this.navigationSubscription.unsubscribe(),this.openSubscription.unsubscribe(),this.closeSubscription.unsubscribe(),this.enterSubscription.unsubscribe(),this.escSubscription.unsubscribe(),this.componentBlurredSubscription.unsubscribe(),this.filterBlurredSubscription.unsubscribe(),this.selectionSubscription&&this.selectionSubscription.unsubscribe())},j.prototype.itemFromEvent=function(e){var t=e.indices[0],i=this.dataService.itemAt(t),i=h.isPresent(i)?i:this.currentOrDefault(t),n=this.prop(this.valueField,this.valuePrimitive)(i);return{dataItem:i,index:t,newSelection:e.newSelection,value:n}},j.prototype.currentOrDefault=function(e){return h.isPresent(this.dataItem)&&-1!==e?this.dataItem:this.defaultItem},j.prototype.firstFocusableIndex=function(e){var t=this.dataService.itemsCount-1;return this.disabledItemsService.isIndexDisabled(e)?e<t?this.firstFocusableIndex(e+1):void 0:e},j.prototype.handleEnter=function(){this.isOpen?(this.selectionService.change(this.selectionService.focused),this.focus()):this.togglePopup(!0)},j.prototype.handleEscape=function(){h.isPresent(this.selectionService.selected[0])?this.selectionService.change(this.selectionService.selected[0]):(this.togglePopup(!1),this.clearFilter()),this.focus()},j.prototype.clearFilter=function(){this.filterable&&this.filterText&&(this.filterText="",this.cdr.markForCheck(),this.filterChange.emit(this.filterText))},j.prototype.verifySettings=function(e){var t=!h.isPresent(this.valueField)!=!h.isPresent(this.textField);if(d.isDevMode()){if(this.defaultItem&&this.valueField&&"object"!=typeof this.defaultItem)throw new Error(D.DropDownListMessages.defaultItem);if(!0===this.valuePrimitive&&h.isPresent(e)&&"object"==typeof e)throw new Error(D.DropDownListMessages.primitive);if(!1===this.valuePrimitive&&h.isPresent(e)&&"object"!=typeof e)throw new Error(D.DropDownListMessages.object);if(t)throw new Error(D.DropDownListMessages.textAndValue)}},j.prototype.componentBlur=function(){var e=this;this.isFocused=!1;var t=this.prop(this.valueField,this.valuePrimitive),i=h.isPresent(this.selectionService.selected[0])&&t(this.value)!==t(this.dataService.itemAt(this.selectionService.selected[0]));i||s.hasObservers(this.close)||s.hasObservers(this.onBlur)||s.hasObservers(this.filterChange)||h.isUntouched(this.hostElement.nativeElement)?this._zone.run(function(){i&&e.selectionService.change(e.selectionService.selected[0]),e.togglePopup(!1),e.clearFilter(),e.onBlur.emit(),e.onTouchedCallback()}):this.togglePopup(!1)},j.prototype.onMouseDown=function(e){"input"!==e.target.tagName.toLowerCase()&&e.preventDefault()},j.prototype.onKeyPress=function(e){var t;0!==e.which&&e.keyCode!==u.Keys.enter&&(t=String.fromCharCode(e.charCode||e.keyCode),this.ignoreCase&&(t=t.toLowerCase())," "===t&&e.preventDefault(),this.word+=t,this.last=t,this.search())},j.prototype.search=function(){var e=this;clearTimeout(this.typingTimeout),this.filterable||(this.typingTimeout=setTimeout(function(){e.word=""},this.delay),this.selectNext())},j.prototype.selectNext=function(){var e,t,i,n=this,a=this.dataService.filter(function(e){return h.isPresent(e)&&!e.header&&!n.disabledItemsService.isItemDisabled(e)}).map(function(e){return n.dataService.grouped?{item:e.value,itemIndex:e.offsetIndex}:{item:e,itemIndex:n.dataService.indexOf(e)}}),o=h.sameCharsOnly(this.word,this.last),r=a.length,s=!isNaN(this.selectionService.selected[0]),p=s?this.selectionService.selected[0]:0;for(this.defaultItem&&!this.disabledItemsService.isItemDisabled(this.defaultItem)&&(i={item:this.defaultItem,itemIndex:-1},r+=1,p+=1),p+=o&&s?1:0,a=h.shuffleData(a,p,i),t=0;t<r;t++){e=h.getter(a[t].item,this.textField);var l=Boolean(o&&h.matchText(e,this.last,this.ignoreCase)),u=Boolean(h.matchText(e,this.word,this.ignoreCase));if(l||u){t=a[t].itemIndex;break}}t!==r&&this.navigate(t)},j.prototype.emitChange=function(e){this.onChangeCallback(e),this.valueChange.emit(e)},j.prototype.navigate=function(e){this.selectionService.select(e)},j.prototype.prop=function(t,i){return function(e){return h.isPresent(e)?!i||t&&h.isObject(e)?e[t]:e:null}},j.prototype.findDataItem=function(e){var t=e.primitive,i=e.valueField,n=e.value,a={dataItem:null,index:-1},o=this.prop(i,t),r=this.dataService.grouped?function(e){return o(e.value)===o(n)}:function(e){return o(e)===o(n)},s=this.dataService.findIndex(r);return a.dataItem=this.dataService.itemAt(s),a.index=s,a},j.prototype.setState=function(){var e=this.value,t=this.valueField,i=this.textField,n=this.valuePrimitive;if(this.defaultItem){var a=this.prop(t,n)(this.defaultItem),o=this.prop(t,n)(e);if(!h.isPresent(e)||o===a)return this.updateState({dataItem:this.defaultItem,confirm:!0}),this.resetSelection(-1),void(this.filterable&&this.filterText&&this.dataService.itemsCount&&(this.selectionService.focused=this.firstFocusableIndex(0)))}var r=this.findDataItem({primitive:n,valueField:t,value:e}),s=!(n&&i);r.dataItem?(this.updateState({dataItem:r.dataItem,confirm:!0}),this.resetSelection(r.index)):(h.isPresent(e)&&s?this.updateState({dataItem:e}):this._previousDataItem?this.updateState({dataItem:this._previousDataItem}):this.clearState(),this.resetSelection())},j.prototype.handleFilter=function(e){this.filterChange.emit(e.target.value)},j.prototype.pageChange=function(e){this.virtual.skip=e.skip},j.prototype.setMessages=function(){var e=this;this._zone.runOutsideAngular(function(){clearTimeout(e.messagesTimeout),e.messagesTimeout=setTimeout(function(){e.noDataText=e.localization.get("noDataText"),e.cdr.detectChanges()})})},j.prototype.assignAriaDescribedBy=function(){var e=(this.wrapper.nativeElement.getAttribute("aria-describedby")||"").replace(this.valueLabelId,"").trim();this.valueLabelId=h.guid();var t=(this.valueLabelId+" "+e).trim();this.renderer.setAttribute(this.wrapper.nativeElement,"aria-describedby",t)},n.__decorate([d.Input(),n.__metadata("design:type",String)],j.prototype,"focusableId",void 0),n.__decorate([d.Input(),n.__metadata("design:type",String)],j.prototype,"iconClass",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"loading",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],j.prototype,"data",null),n.__decorate([d.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],j.prototype,"value",null),n.__decorate([d.Input(),n.__metadata("design:type",String)],j.prototype,"textField",void 0),n.__decorate([d.Input(),n.__metadata("design:type",String)],j.prototype,"valueField",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],j.prototype,"popupSettings",null),n.__decorate([d.Input(),n.__metadata("design:type",Number)],j.prototype,"listHeight",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Object)],j.prototype,"defaultItem",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"disabled",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],j.prototype,"itemDisabled",null),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"readonly",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"filterable",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],j.prototype,"virtual",null),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"ignoreCase",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Number)],j.prototype,"delay",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"valuePrimitive",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Number)],j.prototype,"tabindex",void 0),n.__decorate([d.Input("tabIndex"),n.__metadata("design:type",Number),n.__metadata("design:paramtypes",[Number])],j.prototype,"tabIndex",null),n.__decorate([d.Output(),n.__metadata("design:type",d.EventEmitter)],j.prototype,"valueChange",void 0),n.__decorate([d.Output(),n.__metadata("design:type",d.EventEmitter)],j.prototype,"filterChange",void 0),n.__decorate([d.Output(),n.__metadata("design:type",d.EventEmitter)],j.prototype,"selectionChange",void 0),n.__decorate([d.Output(),n.__metadata("design:type",d.EventEmitter)],j.prototype,"open",void 0),n.__decorate([d.Output(),n.__metadata("design:type",d.EventEmitter)],j.prototype,"close",void 0),n.__decorate([d.Output("focus"),n.__metadata("design:type",d.EventEmitter)],j.prototype,"onFocus",void 0),n.__decorate([d.Output("blur"),n.__metadata("design:type",d.EventEmitter)],j.prototype,"onBlur",void 0),n.__decorate([d.ContentChild(l.ItemTemplateDirective),n.__metadata("design:type",l.ItemTemplateDirective)],j.prototype,"itemTemplate",void 0),n.__decorate([d.ContentChild(m.GroupTemplateDirective),n.__metadata("design:type",m.GroupTemplateDirective)],j.prototype,"groupTemplate",void 0),n.__decorate([d.ContentChild(v.FixedGroupTemplateDirective),n.__metadata("design:type",v.FixedGroupTemplateDirective)],j.prototype,"fixedGroupTemplate",void 0),n.__decorate([d.ContentChild(g.ValueTemplateDirective),n.__metadata("design:type",g.ValueTemplateDirective)],j.prototype,"valueTemplate",void 0),n.__decorate([d.ContentChild(f.HeaderTemplateDirective),n.__metadata("design:type",f.HeaderTemplateDirective)],j.prototype,"headerTemplate",void 0),n.__decorate([d.ContentChild(_.FooterTemplateDirective),n.__metadata("design:type",_.FooterTemplateDirective)],j.prototype,"footerTemplate",void 0),n.__decorate([d.ContentChild(b.NoDataTemplateDirective),n.__metadata("design:type",b.NoDataTemplateDirective)],j.prototype,"noDataTemplate",void 0),n.__decorate([d.ViewChild("container",{read:d.ViewContainerRef}),n.__metadata("design:type",d.ViewContainerRef)],j.prototype,"container",void 0),n.__decorate([d.ViewChild("popupTemplate"),n.__metadata("design:type",d.TemplateRef)],j.prototype,"popupTemplate",void 0),n.__decorate([d.ViewChild("wrapper",{static:!0}),n.__metadata("design:type",d.ElementRef)],j.prototype,"wrapper",void 0),n.__decorate([d.ViewChild("optionsList"),n.__metadata("design:type",E.ListComponent)],j.prototype,"optionsList",void 0),n.__decorate([d.HostBinding("class.k-widget"),d.HostBinding("class.k-dropdown"),d.HostBinding("class.k-header"),n.__metadata("design:type",Boolean)],j.prototype,"widgetClasses",void 0),n.__decorate([d.HostBinding("attr.dir"),n.__metadata("design:type",String),n.__metadata("design:paramtypes",[])],j.prototype,"dir",null),k=n.__decorate([d.Component({exportAs:"kendoDropDownList",providers:[t.DROPDOWNLIST_VALUE_ACCESSOR,T.DataService,o.SelectionService,p.NavigationService,w.DisabledItemsService,x.LocalizationService,{provide:x.L10N_PREFIX,useValue:"kendo.dropdownlist"},{provide:P.FilterableDropDownComponentBase,useExisting:d.forwardRef(function(){return k})},{provide:s.KendoInput,useExisting:d.forwardRef(function(){return k})}],selector:"kendo-dropdownlist",template:'\n        <ng-container kendoDropDownListLocalizedMessages\n            i18n-noDataText="kendo.dropdownlist.noDataText|The text displayed in the popup when there are no items"\n            noDataText="NO DATA FOUND"\n        >\n        </ng-container>\n        <span #wrapper unselectable="on"\n          role="listbox"\n          [id]="focusableId"\n          [ngClass]="{\n            \'k-dropdown-wrap\': true,\n            \'k-state-default\': !this.disabled,\n            \'k-state-disabled\': this.disabled\n          }"\n          [attr.dir]="direction"\n          [attr.readonly]="readonly"\n          [attr.tabindex]="widgetTabIndex"\n          [attr.aria-disabled]="disabled"\n          [attr.aria-readonly]="readonly"\n          aria-haspopup="listbox"\n          [attr.aria-expanded]="ariaExpanded"\n          [attr.aria-owns]="ariaOwns"\n          [attr.aria-activedescendant]="ariaActivedescendant"\n          [attr.aria-label]="noDataLabel"\n          (keydown)="keydown($event)"\n          (keypress)="keypress($event)"\n          (click)="click()"\n          [kendoEventsOutsideAngular]="{\n            focus: focusComponent,\n            blur: blurComponent\n            }"\n          [scope]="this"\n        >\n            <span class="k-input" unselectable="on" [id]="valueLabelId">\n               <ng-template *ngIf="valueTemplate"\n                   [templateContext]="{\n                       templateRef: valueTemplate.templateRef,\n                       $implicit: dataItem\n                   }">\n               </ng-template>\n               <ng-template [ngIf]="!valueTemplate">{{ getText() }}</ng-template>\n           </span>\n           <span class="k-select" unselectable="on">\n               <span\n                    class="k-icon"\n                    unselectable="on"\n                    [ngClass]="buttonClasses"\n                >\n                </span>\n           </span>\n           <ng-template #popupTemplate>\n               \x3c!--filterable--\x3e\n\n               <ng-template [ngIf]="filterable">\n                   <span class="k-list-filter" (click)="$event.stopImmediatePropagation()">\n                       <input\n                           [attr.aria-owns]="ariaOwns"\n                           [attr.aria-activedescendant]="ariaActivedescendant"\n                           [attr.aria-label]="noDataLabel"\n                           tabindex="-1"\n                           [filterInput]="isFocused && !touchEnabled"\n                           [dir]="direction"\n                           [(ngModel)]="filterText"\n                           class="k-textbox"\n                           (keydown)="keydown($event)"\n                           (input)="handleFilter($event)"\n                           (focus)="onFilterFocus()"\n                           (blur)="blurFilterInput()" />\n                       <span class="k-icon k-i-search" unselectable="on"></span>\n                   </span>\n               </ng-template>\n               \x3c!--default item--\x3e\n               <ng-template [ngIf]="defaultItem && !itemTemplate">\n                   <div class="k-list-optionlabel" [ngClass]="{ \'k-state-disabled\': isDisabledDefaultItem }" kendoDropDownsSelectable [index]="-1">\n                       {{ getDefaultItemText() }}\n                   </div>\n               </ng-template>\n               <ng-template [ngIf]="defaultItem && itemTemplate">\n                   <div class="k-list-optionlabel" [ngClass]="{ \'k-state-disabled\': isDisabledDefaultItem }" kendoDropDownsSelectable [index]="-1">\n                       <ng-template\n                           [templateContext]="{\n                               templateRef: itemTemplate.templateRef,\n                               $implicit: defaultItem\n                           }">\n                       </ng-template>\n                   </div>\n               </ng-template>\n               \x3c!--header template--\x3e\n               <ng-template *ngIf="headerTemplate"\n                   [templateContext]="{\n                       templateRef: headerTemplate.templateRef\n                   }">\n               </ng-template>\n               \x3c!--list--\x3e\n               <kendo-list\n                   #optionsList\n                   [id]="listBoxId"\n                   [optionPrefix]="optionPrefix"\n                   [data]="data"\n                   [textField]="textField"\n                   [valueField]="valueField"\n                   [template]="itemTemplate"\n                   [groupTemplate]="groupTemplate"\n                   [fixedGroupTemplate]="fixedGroupTemplate"\n                   [height]="listHeight"\n                   [show]="isOpen"\n                   [virtual]="virtual"\n                   (pageChange)="pageChange($event)"\n                   >\n               </kendo-list>\n               \x3c!--no-data template--\x3e\n               <div class="k-nodata" *ngIf="data.length === 0">\n                   <ng-template [ngIf]="noDataTemplate"\n                       [templateContext]="{\n                           templateRef: noDataTemplate ? noDataTemplate.templateRef : undefined\n                       }">\n                   </ng-template>\n                   <ng-template [ngIf]="!noDataTemplate">\n                       <div>{{ noDataText }}</div>\n                   </ng-template>\n               </div>\n               \x3c!--footer template--\x3e\n               <ng-template *ngIf="footerTemplate"\n                   [templateContext]="{\n                       templateRef: footerTemplate.templateRef\n                   }">\n               </ng-template>\n            </ng-template>\n        </span>\n        <ng-template [ngIf]="isOpen">\n            <kendo-resize-sensor (resize)="onResize()"></kendo-resize-sensor>\n        </ng-template>\n        <ng-container #container></ng-container>\n  '}),n.__param(10,d.Optional()),n.__param(10,d.Inject(C.TOUCH_ENABLED)),n.__metadata("design:paramtypes",[x.LocalizationService,I.PopupService,o.SelectionService,p.NavigationService,w.DisabledItemsService,T.DataService,d.NgZone,d.Renderer2,d.ElementRef,d.ChangeDetectorRef,Boolean])],j));function j(e,t,i,n,a,o,r,s,p,l,u){this.localization=e,this.popupService=t,this.selectionService=i,this.navigationService=n,this.disabledItemsService=a,this.dataService=o,this._zone=r,this.renderer=s,this.hostElement=p,this.cdr=l,this.touchEnabled=u,this.focusableId="k-"+h.guid(),this.listHeight=200,this.disabled=!1,this.readonly=!1,this.filterable=!1,this.ignoreCase=!0,this.delay=500,this.tabindex=0,this.valueChange=new d.EventEmitter,this.filterChange=new d.EventEmitter,this.selectionChange=new d.EventEmitter,this.open=new d.EventEmitter,this.close=new d.EventEmitter,this.onFocus=new d.EventEmitter,this.onBlur=new d.EventEmitter,this.widgetClasses=!0,this.groupIndices=[],this.listBoxId=h.guid(),this.optionPrefix=h.guid(),this.filterText="",this._isFocused=!1,this.onTouchedCallback=function(e){},this.onChangeCallback=function(e){},this.word="",this.last="",this.filterFocused=new d.EventEmitter,this.filterBlurred=new d.EventEmitter,this.wrapperFocused=new d.EventEmitter,this.wrapperBlurred=new d.EventEmitter,this.selectionSubscription=new c.Subscription,this._open=!1,this._popupSettings={animate:!0},this.direction=e.rtl?"rtl":"ltr",this.data=[],this.subscribeEvents(),this.popupMouseDownHandler=this.onMouseDown.bind(this)}t.DropDownListComponent=F},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),d=i(1),a=i(25),o=i(29),r=i(8),s=i(16),p=i(15),l=i(7),u=i(6),c=i(20),h=i(5),m=i(28),v=i(14),g=i(22),f=i(21),_=i(4),b=i(2),y=i(23),S=i(24),x=i(12),I=i(3),C=i(11),D=i(18),w=i(34),T=i(19),P=i(13),E=i(10),O=i(27);t.COMBOBOX_VALUE_ACCESSOR={multi:!0,provide:a.NG_VALUE_ACCESSOR,useExisting:d.forwardRef(function(){return F})};var k,F=(k=j,Object.defineProperty(j.prototype,"width",{get:function(){var e=0;_.isDocumentAvailable()&&(e=this.wrapper.nativeElement.offsetWidth);var t=this.popupSettings.width||e;return{min:isNaN(e)?e:e+"px",max:isNaN(t)?t:t+"px"}},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"height",{get:function(){var e=this.popupSettings.height;return b.isPresent(e)?e+"px":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"text",{get:function(){return this._text},set:function(e){this._text=b.isPresent(e)?e.toString():""},enumerable:!0,configurable:!0}),j.prototype.togglePopup=function(e){var t=this.disabled||this.readonly,i=this.isOpen===e;t||i||this.triggerPopupEvents(e)||this._toggle(e)},Object.defineProperty(j.prototype,"activeDescendant",{get:function(){if(!this.isOpen||!b.isPresent(this.selectionService.focused)||-1===this.selectionService.focused)return null;var e=this.dataService.itemAt(this.selectionService.focused);return this.optionPrefix+"-"+(e?b.getter(e,this.valueField):"")},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"noDataLabel",{get:function(){if(0===this.data.length)return this.noDataText},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"clearTitle",{get:function(){return this.localization.get("clearTitle")},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"appendTo",{get:function(){var e=this.popupSettings.appendTo;if(e&&"root"!==e)return"component"===e?this.container:e},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"data",{get:function(){var e=this.virtual;if(e){var t=e.skip||0,i=t+e.pageSize;return e.total=this.dataService.data.length,this.dataService.data.slice(t,i)}return this.dataService.data},set:function(e){var t;this.dataService.data=e||[],this.virtual&&(this.virtual.skip=0),this.setState(),this._filtering&&(t=0<this.text.length&&0<this.dataService.itemsCount?this.firstFocusableIndex(0):-1,this.selectionService.focused=t),this.suggest&&this.dataService.itemsCount&&this.text&&(this.suggestedText=b.getter(this.dataService.itemAt(0),this.textField))},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"value",{get:function(){return this._value},set:function(e){this.verifySettings(e),this._value=e,this.cdr.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"popupSettings",{get:function(){return this._popupSettings},set:function(e){this._popupSettings=Object.assign({animate:!0},e)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"itemDisabled",{set:function(e){if("function"!=typeof e)throw new Error("itemDisabled must be a function, but received "+JSON.stringify(e)+".");this.disabledItemsService.itemDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"tabIndex",{get:function(){return this.tabindex},set:function(e){this.tabindex=e},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"virtual",{get:function(){return this._virtualSettings},set:function(e){this._virtualSettings=O.normalizeVirtualizationSettings(e)},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"clearable",{get:function(){return this.clearButton},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"dir",{get:function(){return this.direction},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"isFocused",{get:function(){return this._isFocused},set:function(e){this.renderer[e?"addClass":"removeClass"](this.wrapper.nativeElement,"k-state-focused"),this._isFocused=e},enumerable:!0,configurable:!0}),j.prototype.ngOnInit=function(){this.attachStreams(),this.createSelectionStream(),this.createValueStream(),this.setMessages()},j.prototype.createValueStream=function(){var r=this,e=this.valueSubject.pipe(f.filter(function(e){var t=r.prop(r.valueField,r.valuePrimitive),i=r.prop(r.textField,r.valuePrimitive),n=t(r.value),a=t(e),o=i(e);return!(!b.isPresent(r.value)&&!b.isPresent(a)||(b.isPresent(o)&&(o=o.toString()),n===a&&r.text===o&&(r.clearFilter(),1)))}),f.map(function(e){var t=r.prop(r.valueField,r.valuePrimitive),i=r.prop(r.textField,r.valuePrimitive),n=t(e);return{dataItem:e,text:i(e),value:r.valuePrimitive?n:e}})),t=f.partition(function(){return r.allowCustom})(this.customValueSubject.pipe(f.throttleTime(300))),i=t[0].pipe(f.tap(function(){r.loading=!0,r.disabled=!0,r.cdr.detectChanges()}),f.filter(function(){var e=r.prop(r.valueField,r.valuePrimitive),t=r.text!==e(r.value);return r.loading=t,(r.disabled=t)||r.clearFilter(),t}),this.valueNormalizer,f.map(function(e){return{custom:!0,dataItem:e,text:r.text,value:e}})),n=t[1].pipe(f.map(function(){return{custom:!0,dataItem:void 0,text:void 0,value:void 0}})),a=this.clearValueSubject.pipe(f.map(function(){return{dataItem:void 0,text:void 0,value:void 0}}));this.valueSubscription&&this.valueSubscription.unsubscribe();var o=g.merge(e,i,n,a);this.valueSubscription=o.pipe(f.catchError(function(){return r.dataItem=void 0,r.value=void 0,r.text=void 0,r.loading=!1,r.disabled=!1,r.emitSelectionChange(void 0),r.emitValueChange(),r.createValueStream(),g.of(null)})).subscribe(function(e){r.dataItem=e.dataItem,r.value=e.value,r.text=e.text,r.loading=!1,r.disabled=!1,r.clearFilter(),e.custom&&(r.selectionService.focused=-1),r.emitSelectionChange(e.custom?void 0:r.dataItem),r.emitValueChange()})},j.prototype.attachStreams=function(){var i=this;_.isDocumentAvailable()&&(this.subs.add(this.localization.changes.subscribe(function(e){var t=e.rtl;i.direction=t?"rtl":"ltr",i.setMessages()})),this.subs.add(g.merge(this.navigationService.up,this.navigationService.down,this.navigationService.home,this.navigationService.end).pipe(f.filter(function(e){return b.isPresent(e.index)})).subscribe(function(e){return i.navigate(e.index)})),this.subs.add(this.navigationService.open.subscribe(this.handleNavigationOpen.bind(this))),this.subs.add(this.navigationService.close.subscribe(function(){return i.togglePopup(!1)})),this.subs.add(this.navigationService.esc.subscribe(this.handleEscape.bind(this))),this.subs.add(this.navigationService.enter.pipe(f.tap(function(e){i.isOpen&&e.originalEvent.preventDefault()})).subscribe(this.handleEnter.bind(this))),this.subs.add(g.merge(this.selectionService.onChange,this.selectionService.onSelect.pipe(f.filter(function(e){return!i.isOpen}))).pipe(f.tap(function(e){i._filtering=!1,i.togglePopup(!1)}),f.map(function(e){return i.dataService.itemAt(e.indices[0])})).subscribe(function(e){i.change(e)})),this.subs.add(this.selectionService.onSelect.pipe(f.filter(function(e){return i.isOpen}),f.tap(function(e){return i._filtering=!1}),f.map(function(e){return i.dataService.itemAt(e.indices[0])})).subscribe(function(e){i.updateState({dataItem:e}),i.emitSelectionChange(e)})))},j.prototype.ngOnDestroy=function(){this.destroyPopup(),clearTimeout(this.messagesTimeout),this.subs.unsubscribe(),[this.valueSubscription,this.selectionSubscription].forEach(function(e){return b.isPresent(e)&&e.unsubscribe()})},j.prototype.ngOnChanges=function(e){var t=this.virtual;t&&e.data&&e.data.isFirstChange()&&this.pageChange({skip:0,take:t.pageSize}),void 0===this.valuePrimitive&&(this.valuePrimitive=!this.valueField),this.verifySettings(this.value),_.isChanged("valueNormalizer",e)&&this.createValueStream(),_.isChanged("value",e)&&this.createSelectionStream(),void 0===this.valuePrimitive&&(this.valuePrimitive=!this.valueField),/(value|textField|valueField|valuePrimitive)/g.test(Object.keys(e).join())&&this.setState()},j.prototype.focus=function(){this.disabled||this.searchbar.focus()},j.prototype.blur=function(){this.disabled||this.searchbar.blur()},j.prototype.toggle=function(t){var i=this;Promise.resolve(null).then(function(){var e=b.isPresent(t)?t:!i._open;i._toggle(e),i.cdr.markForCheck()})},Object.defineProperty(j.prototype,"isOpen",{get:function(){return this._open},enumerable:!0,configurable:!0}),j.prototype.reset=function(){this.value=void 0,this.clearState(),this.resetSelection(),this.createSelectionStream()},j.prototype.isEmpty=function(){var e=!b.isPresent(this.text)||b.isEmptyString(this.text),t=!b.isPresent(this.value)||b.isEmptyString(this.value);return e&&t},j.prototype.clearValue=function(e){e.stopImmediatePropagation(),this.focus(),this._filtering=!0,this._previousDataItem=void 0,this.selectionService.resetSelection([]),this.clearValueSubject.next(),this._filtering=!1},j.prototype.writeValue=function(e){this.text="",this.value=null===e?void 0:e,this.setState(),this.createSelectionStream()},j.prototype.registerOnChange=function(e){this.onChangeCallback=e},j.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},j.prototype.setDisabledState=function(e){this.disabled=e},Object.defineProperty(j.prototype,"buttonClasses",{get:function(){return this.loading?"k-i-loading":this.iconClass||"k-i-arrow-s"},enumerable:!0,configurable:!0}),j.prototype.onResize=function(){var e,t,i,n;this.isOpen&&(e=this.popupRef.popupElement,i=(t=this.width).min,n=t.max,e.style.minWidth=i,e.style.width=n)},j.prototype.verifySettings=function(e){var t=!b.isPresent(this.valueField)!=!b.isPresent(this.textField);if(d.isDevMode()){if(!0===this.valuePrimitive&&b.isPresent(e)&&"object"==typeof e)throw new Error(w.ComboBoxMessages.primitive);if(!1===this.valuePrimitive&&b.isPresent(e)&&"object"!=typeof e)throw new Error(w.ComboBoxMessages.object);if(t)throw new Error(w.ComboBoxMessages.textAndValue);if(this.virtual&&isNaN(this.virtual.itemHeight))throw new Error(w.ComboBoxMessages.noItemHeight)}},j.prototype.setState=function(){var e,t,i,n;this._filtering||(e=this.value,t=this.valueField,i=this.valuePrimitive,n=this.findDataItem({primitive:i,valueField:t,value:e}),b.isPresent(n.dataItem)?(this.updateState({dataItem:n.dataItem,confirm:!0}),this.resetSelection(n.index)):b.isPresent(e)&&this.allowCustom?(this.updateState({dataItem:e}),this.resetSelection(-1)):this._previousDataItem&&this.value?(this.updateState({dataItem:this._previousDataItem}),this.resetSelection()):(this.clearState(),this.resetSelection(-1)))},j.prototype.updateState=function(e){var t=e.dataItem,i=e.confirm,n=void 0!==i&&i;this.dataItem=t,this.text=this.prop(this.textField,this.valuePrimitive)(t),n&&(this._previousDataItem=t)},j.prototype.clearState=function(){this.text=void 0,this.dataItem=void 0},j.prototype.resetSelection=function(e){var t=!b.isPresent(e)||e<0;this.selectionService.resetSelection(t?[]:[e]),this.selectionService.focused=e},j.prototype.firstFocusableIndex=function(e){var t=this.data.length-1;return this.disabledItemsService.isIndexDisabled(e)?e<t?this.firstFocusableIndex(e+1):void 0:e},j.prototype.findIndexPredicate=function(i){var n=this;return this.dataService.grouped?function(e){var t=n.prop(n.textField,n.valuePrimitive)(e.value);return(t=b.isPresent(t)?t.toString().toLowerCase():"").startsWith(i.toLowerCase())}:function(e){var t=n.prop(n.textField,n.valuePrimitive)(e);return(t=b.isPresent(t)?t.toString().toLowerCase():"").startsWith(i.toLowerCase())}},j.prototype.prop=function(t,i){return function(e){return b.isPresent(e)?!i||t&&b.isObject(e)?e[t]:e:null}},j.prototype.findDataItem=function(e){var t=e.primitive,i=e.valueField,n=e.value,a={dataItem:null,index:-1},o=this.prop(i,t),r=this.dataService.grouped?function(e){return o(e.value)===o(n)}:function(e){return o(e)===o(n)},s=this.dataService.findIndex(r);return a.dataItem=this.dataService.itemAt(s),a.index=s,a},j.prototype.search=function(e,t){var i;void 0===t&&(t=0),i=e.length&&this.dataService.itemsCount?this.dataService.findIndex(this.findIndexPredicate(e),t):-1,this.disabledItemsService.isIndexDisabled(i)?i+1<this.dataService.itemsCount?this.search(e,i+1):this.selectionService.focus(-1):(this.selectionService.focus(i),this.suggest&&(this.suggestedText=b.getter(this.dataService.itemAt(i),this.textField)))},j.prototype.getSuggestion=function(){var e=!!this.selectionService.selected.length,t=this.suggest&&!this.backspacePressed&&this.suggestedText&&this.text;if(!e&&t&&this.suggestedText.toLowerCase().startsWith(this.text.toLowerCase()))return this.suggestedText;this.suggestedText=void 0},j.prototype.navigate=function(e){0!==this.dataService.itemsCount&&(this.text=this.prop(this.textField,this.valuePrimitive)(this.dataService.itemAt(e)),this.selectionService.select(e))},j.prototype.handleNavigate=function(e){var t,i=b.isPresent(this.selectionService.selected[0]),n=isNaN(this.selectionService.focused)?this.firstFocusableIndex(0):this.selectionService.focused,a=0;this.disabled||this.readonly||e.keyCode===S.Keys.home||e.keyCode===S.Keys.end||(i||(e.keyCode===S.Keys.down?a=-1:e.keyCode===S.Keys.up&&(a=1)),(t=this.navigationService.process({current:a+n,max:this.dataService.itemsCount-1,min:0,originalEvent:e}))!==y.NavigationAction.Undefined&&t!==y.NavigationAction.Left&&t!==y.NavigationAction.Right&&t!==y.NavigationAction.Backspace&&t!==y.NavigationAction.Delete&&(t===y.NavigationAction.Enter&&this.isOpen||t!==y.NavigationAction.Enter)&&e.preventDefault())},j.prototype.handleEnter=function(){var e=this.text,t=this.selectionService.focused,i=b.isPresent(t)&&-1!==t,n=b.getter(this._previousDataItem,this.textField,this.valuePrimitive)||"",a=b.getter(this.dataService.itemAt(t),this.textField),o=e!==n;this.togglePopup(!1),this._filtering=!1,this.allowCustom&&o&&(e===a||this.useSuggestion()?this.selectionService.change(t):this.change(e,!0)),this.allowCustom||(i?this.selectionService.change(t):o&&this.change(e,!0))},j.prototype.handleBlur=function(){var e=this;this._filtering=!1,this.searchbar.input.nativeElement.scrollLeft=0,this.isFocused=!1;var t=this.prop(this.valueField,this.valuePrimitive),i=t(this.dataItem)!==t(this.value),n=this.searchbar.value,a=this.prop(this.textField,this.valuePrimitive),o=n!==(a(this.dataItem)||""),r=i||o;r||_.hasObservers(this.onBlur)||_.hasObservers(this.close)||b.isUntouched(this.hostElement.nativeElement)?this._zone.run(function(){r&&(b.isPresent(e.focusedItemText)&&e.focusedItemText.toLowerCase()===n.toLowerCase()||i?e.selectionService.change(e.selectionService.focused):e.change(n,!0)),e.onBlur.emit(),e.onTouchedCallback(),e.togglePopup(!1)}):this.togglePopup(!1)},j.prototype.handleEscape=function(){this.togglePopup(!1),0<this.selectionService.selected.length||(this.suggestedText=null,this.selectionService.focused=-1)},j.prototype.handleNavigationOpen=function(){this.restoreItemFocus(),this.togglePopup(!0)},j.prototype.searchBarChange=function(e){var t=this.text?this.text.length:0;this.backspacePressed=e.length<t,this.text=e,this.selectionService.resetSelection([]),this.togglePopup(!0),this._filtering=!0,this.filterable&&this.filterText!==e?(this.filterText=e,this.filterChange.emit(e)):this.search(e)},j.prototype.handleFocus=function(){var e=this;this.isFocused=!0,_.hasObservers(this.onFocus)&&this._zone.run(function(){return e.onFocus.emit()})},j.prototype.pageChange=function(e){this.virtual.skip=e.skip},j.prototype.change=function(e,t){void 0===t&&(t=!1),t?this.customValueSubject.next(e):this.valueSubject.next(e)},j.prototype.emitSelectionChange=function(e){this.selectionSubject.next(e)},j.prototype.emitValueChange=function(){this.onChangeCallback(this.value),this.valueChange.emit(this.value),this._previousDataItem=this.dataItem},j.prototype.selectClick=function(){this.touchEnabled||this.searchbar.focus(),this.isOpen||this.restoreItemFocus(),this.togglePopup(!this.isOpen)},Object.defineProperty(j.prototype,"listContainerClasses",{get:function(){var e=["k-list-container","k-reset"];return this.popupSettings.popupClass&&e.push(this.popupSettings.popupClass),e},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"focusedItemText",{get:function(){var e=this.selectionService.focused;if(!b.isPresent(e)||-1===e)return null;var t=b.getter(this.dataService.itemAt(e),this.textField);return b.isPresent(t)?t.toString():""},enumerable:!0,configurable:!0}),j.prototype.restoreItemFocus=function(){b.isPresent(this.selectionService.focused)&&-1<this.selectionService.focused||!this.text||!this.dataService.itemsCount||(this.filterable?this.selectionService.focused=this.firstFocusableIndex(0):this.search(this.text))},j.prototype.useSuggestion=function(){if(!this.suggest||!b.isPresent(this.searchbar.value))return!1;var e=this.dataService.itemAt(this.selectionService.focused),t=this.prop(this.textField,this.valuePrimitive)(e);return!!b.isPresent(t)&&this.searchbar.value.toLowerCase()===t.toLowerCase()},j.prototype.destroyPopup=function(){this.popupRef&&(this.popupRef.popupElement.removeEventListener("mousedown",this.popupMouseDownHandler),this.popupRef.close(),this.popupRef=null)},j.prototype.createPopup=function(){var e=this;this.virtual&&(this.virtual.skip=0);var t="rtl"===this.direction?"right":"left",i={horizontal:t,vertical:"bottom"},n={horizontal:t,vertical:"top"};this.popupRef=this.popupService.open({anchor:this.wrapper,animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupClass:this.listContainerClasses,positionMode:"absolute",anchorAlign:i,popupAlign:n});var a=this.popupRef.popupElement,o=this.width,r=o.min,s=o.max;a.addEventListener("mousedown",this.popupMouseDownHandler),a.style.minWidth=r,a.style.width=s,a.style.height=this.height,a.setAttribute("dir",this.direction),this.popupRef.popupOpen.subscribe(function(){e.cdr.detectChanges(),e.optionsList.scrollToItem(e.selectionService.focused)}),this.popupRef.popupAnchorViewportLeave.subscribe(function(){return e.togglePopup(!1)})},j.prototype._toggle=function(e){this._open=e,this.destroyPopup(),this._open&&this.createPopup()},j.prototype.triggerPopupEvents=function(e){var t=new x.PreventableEvent;return e?this.open.emit(t):this.close.emit(t),t.isDefaultPrevented()},j.prototype.clearFilter=function(){this.filterable&&this.filterText&&(this.filterText="",this.filterChange.emit(this.filterText))},j.prototype.setMessages=function(){var e=this;this._zone.runOutsideAngular(function(){clearTimeout(e.messagesTimeout),e.messagesTimeout=setTimeout(function(){e.noDataText=e.localization.get("noDataText"),e.cdr.detectChanges()})})},j.prototype.createSelectionStream=function(){var t=this;b.isPresent(this.selectionSubscription)&&this.selectionSubscription.unsubscribe(),this.selectionSubscription=this.selectionSubject.pipe(f.distinctUntilChanged()).subscribe(function(e){return t.selectionChange.emit(e)})},n.__decorate([d.Input(),n.__metadata("design:type",String)],j.prototype,"focusableId",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"allowCustom",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],j.prototype,"data",null),n.__decorate([d.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],j.prototype,"value",null),n.__decorate([d.Input(),n.__metadata("design:type",String)],j.prototype,"textField",void 0),n.__decorate([d.Input(),n.__metadata("design:type",String)],j.prototype,"valueField",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"valuePrimitive",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Function)],j.prototype,"valueNormalizer",void 0),n.__decorate([d.Input(),n.__metadata("design:type",String)],j.prototype,"placeholder",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],j.prototype,"popupSettings",null),n.__decorate([d.Input(),n.__metadata("design:type",Number)],j.prototype,"listHeight",void 0),n.__decorate([d.Input(),n.__metadata("design:type",String)],j.prototype,"iconClass",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"loading",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"suggest",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"clearButton",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"disabled",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],j.prototype,"itemDisabled",null),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"readonly",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Number)],j.prototype,"tabindex",void 0),n.__decorate([d.Input("tabIndex"),n.__metadata("design:type",Number),n.__metadata("design:paramtypes",[Number])],j.prototype,"tabIndex",null),n.__decorate([d.Input(),n.__metadata("design:type",Boolean)],j.prototype,"filterable",void 0),n.__decorate([d.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],j.prototype,"virtual",null),n.__decorate([d.Output(),n.__metadata("design:type",d.EventEmitter)],j.prototype,"valueChange",void 0),n.__decorate([d.Output(),n.__metadata("design:type",d.EventEmitter)],j.prototype,"selectionChange",void 0),n.__decorate([d.Output(),n.__metadata("design:type",d.EventEmitter)],j.prototype,"filterChange",void 0),n.__decorate([d.Output(),n.__metadata("design:type",d.EventEmitter)],j.prototype,"open",void 0),n.__decorate([d.Output(),n.__metadata("design:type",d.EventEmitter)],j.prototype,"close",void 0),n.__decorate([d.Output("focus"),n.__metadata("design:type",d.EventEmitter)],j.prototype,"onFocus",void 0),n.__decorate([d.Output("blur"),n.__metadata("design:type",d.EventEmitter)],j.prototype,"onBlur",void 0),n.__decorate([d.ContentChild(r.ItemTemplateDirective),n.__metadata("design:type",r.ItemTemplateDirective)],j.prototype,"template",void 0),n.__decorate([d.ContentChild(s.HeaderTemplateDirective),n.__metadata("design:type",s.HeaderTemplateDirective)],j.prototype,"headerTemplate",void 0),n.__decorate([d.ContentChild(p.FooterTemplateDirective),n.__metadata("design:type",p.FooterTemplateDirective)],j.prototype,"footerTemplate",void 0),n.__decorate([d.ContentChild(c.NoDataTemplateDirective),n.__metadata("design:type",c.NoDataTemplateDirective)],j.prototype,"noDataTemplate",void 0),n.__decorate([d.ContentChild(l.GroupTemplateDirective),n.__metadata("design:type",l.GroupTemplateDirective)],j.prototype,"groupTemplate",void 0),n.__decorate([d.ContentChild(u.FixedGroupTemplateDirective),n.__metadata("design:type",u.FixedGroupTemplateDirective)],j.prototype,"fixedGroupTemplate",void 0),n.__decorate([d.ViewChild("container",{read:d.ViewContainerRef}),n.__metadata("design:type",d.ViewContainerRef)],j.prototype,"container",void 0),n.__decorate([d.ViewChild("popupTemplate"),n.__metadata("design:type",d.TemplateRef)],j.prototype,"popupTemplate",void 0),n.__decorate([d.ViewChild(o.SearchBarComponent),n.__metadata("design:type",o.SearchBarComponent)],j.prototype,"searchbar",void 0),n.__decorate([d.ViewChild("optionsList"),n.__metadata("design:type",E.ListComponent)],j.prototype,"optionsList",void 0),n.__decorate([d.ViewChild("wrapper",{static:!0}),n.__metadata("design:type",d.ElementRef)],j.prototype,"wrapper",void 0),n.__decorate([d.HostBinding("class.k-widget"),d.HostBinding("class.k-combobox"),d.HostBinding("class.k-header"),n.__metadata("design:type",Boolean)],j.prototype,"widgetClasses",void 0),n.__decorate([d.HostBinding("class.k-combobox-clearable"),n.__metadata("design:type",Boolean),n.__metadata("design:paramtypes",[])],j.prototype,"clearable",null),n.__decorate([d.HostBinding("attr.dir"),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[])],j.prototype,"dir",null),k=n.__decorate([d.Component({exportAs:"kendoComboBox",providers:[t.COMBOBOX_VALUE_ACCESSOR,P.DataService,h.SelectionService,m.NavigationService,v.DisabledItemsService,I.LocalizationService,{provide:I.L10N_PREFIX,useValue:"kendo.combobox"},{provide:T.FilterableDropDownComponentBase,useExisting:d.forwardRef(function(){return k})},{provide:_.KendoInput,useExisting:d.forwardRef(function(){return k})}],selector:"kendo-combobox",template:'\n        <ng-container kendoComboBoxLocalizedMessages\n            i18n-noDataText="kendo.combobox.noDataText|The text displayed in the popup when there are no items"\n            noDataText="NO DATA FOUND"\n\n            i18n-clearTitle="kendo.combobox.clearTitle|The title of the clear button"\n            clearTitle="clear"\n        >\n        </ng-container>\n        <span #wrapper unselectable="on"\n            class="k-dropdown-wrap"\n            [ngClass]="{ \'k-state-default\': !disabled, \'k-state-disabled\': disabled }"\n        >\n          <kendo-searchbar #searchbar\n              [role]="\'combobox\'"\n              [id]="focusableId"\n              [listId]="listBoxId"\n              [activeDescendant]="activeDescendant"\n              [noDataLabel]="noDataLabel"\n              [userInput]="text"\n              [suggestedText]="getSuggestion()"\n              [disabled]="disabled"\n              [readonly]="readonly"\n              [tabIndex]="tabIndex"\n              [popupOpen]="isOpen"\n              [placeholder]="placeholder"\n              (onNavigate)="handleNavigate($event)"\n              (valueChange)="searchBarChange($event)"\n              (onBlur)="handleBlur()"\n              (onFocus)="handleFocus()"\n          ></kendo-searchbar>\n          <span *ngIf="!loading && !readonly && (clearButton && text?.length)" class="k-icon k-clear-value k-i-close" [attr.title]="clearTitle" role="button" tabindex="-1" (click)="clearValue($event)" (mousedown)="$event.preventDefault()"></span>\n          <span unselectable="on"\n              class="k-select"\n              (click)="selectClick()"\n              (mousedown)="$event.preventDefault()" >\n              <span class="k-icon" [ngClass]="buttonClasses">\n               </span>\n          </span>\n          <ng-template #popupTemplate>\n              \x3c!--header template--\x3e\n              <ng-template *ngIf="headerTemplate"\n                  [templateContext]="{\n                      templateRef: headerTemplate.templateRef\n                  }">\n              </ng-template>\n              \x3c!--list--\x3e\n              <kendo-list\n                  #optionsList\n                  [id]="listBoxId"\n                  [optionPrefix]="optionPrefix"\n                  [data]="data"\n                  [textField]="textField"\n                  [valueField]="valueField"\n                  [template]="template"\n                  [groupTemplate]="groupTemplate"\n                  [fixedGroupTemplate]="fixedGroupTemplate"\n                  [height]="listHeight"\n                  [show]="isOpen"\n                  [virtual]="virtual"\n                  (pageChange)="pageChange($event)"\n              >\n              </kendo-list>\n              \x3c!--no-data template--\x3e\n              <div class="k-nodata" *ngIf="data.length === 0">\n                  <ng-template [ngIf]="noDataTemplate"\n                      [templateContext]="{\n                          templateRef: noDataTemplate ? noDataTemplate.templateRef : undefined\n                      }">\n                  </ng-template>\n                  <ng-template [ngIf]="!noDataTemplate">\n                      <div>{{ noDataText }}</div>\n                  </ng-template>\n              </div>\n              \x3c!--footer template--\x3e\n              <ng-template *ngIf="footerTemplate"\n                  [templateContext]="{\n                      templateRef: footerTemplate.templateRef\n                  }">\n              </ng-template>\n          </ng-template>\n        </span>\n        <ng-template [ngIf]="isOpen">\n            <kendo-resize-sensor (resize)="onResize()"></kendo-resize-sensor>\n        </ng-template>\n        <ng-container #container></ng-container>\n  '}),n.__param(10,d.Optional()),n.__param(10,d.Inject(D.TOUCH_ENABLED)),n.__metadata("design:paramtypes",[I.LocalizationService,C.PopupService,h.SelectionService,m.NavigationService,v.DisabledItemsService,P.DataService,d.NgZone,d.ChangeDetectorRef,d.Renderer2,d.ElementRef,Boolean])],j));function j(e,t,i,n,a,o,r,s,p,l,u){this.localization=e,this.popupService=t,this.selectionService=i,this.navigationService=n,this.disabledItemsService=a,this.dataService=o,this._zone=r,this.cdr=s,this.renderer=p,this.hostElement=l,this.touchEnabled=u,this.selected=[],this.focusableId="k-"+b.guid(),this.allowCustom=!1,this.valueNormalizer=function(e){return e.pipe(f.map(function(e){return e}))},this.placeholder="",this.listHeight=200,this.suggest=!1,this.clearButton=!0,this.disabled=!1,this.readonly=!1,this.tabindex=0,this.filterable=!1,this.valueChange=new d.EventEmitter,this.selectionChange=new d.EventEmitter,this.filterChange=new d.EventEmitter,this.open=new d.EventEmitter,this.close=new d.EventEmitter,this.onFocus=new d.EventEmitter,this.onBlur=new d.EventEmitter,this.widgetClasses=!0,this._isFocused=!1,this.listBoxId=b.guid(),this.optionPrefix=b.guid(),this.onChangeCallback=function(e){},this.onTouchedCallback=function(e){},this._filtering=!1,this._text="",this.filterText="",this._open=!1,this._popupSettings={animate:!0},this.popupMouseDownHandler=function(e){return e.preventDefault()},this.customValueSubject=new g.Subject,this.valueSubject=new g.Subject,this.clearValueSubject=new g.Subject,this.selectionSubject=new g.Subject,this.subs=new g.Subscription,this.direction=e.rtl?"rtl":"ltr",this.data=[]}t.ComboBoxComponent=F},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=n.__decorate([a.Directive({selector:'"li[role=option], li[role=group]"'}),n.__metadata("design:paramtypes",[a.ElementRef])],function(e){this.element=e});t.ListItemDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),u=i(1),s=i(4),a=i(25),o=i(29),r=i(8),p=i(16),l=i(15),d=i(7),c=i(6),h=i(5),m=i(28),v=i(14),g=i(22),f=i(21),_=i(2),b=i(23),y=i(20),S=i(12),x=i(3),I=i(11),C=i(19),D=i(13),w=i(10),T=i(27);t.AUTOCOMPLETE_VALUE_ACCESSOR={multi:!0,provide:a.NG_VALUE_ACCESSOR,useExisting:u.forwardRef(function(){return E})};var P,E=(P=O,Object.defineProperty(O.prototype,"width",{get:function(){var e=0;s.isDocumentAvailable()&&(e=this.wrapper.offsetWidth);var t=this.popupSettings.width||e;return{min:isNaN(e)?e:e+"px",max:isNaN(t)?t:t+"px"}},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"height",{get:function(){var e=this.popupSettings.height;return _.isPresent(e)?e+"px":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"listContainerClasses",{get:function(){var e=["k-list-container","k-reset"];return this.popupSettings.popupClass&&e.push(this.popupSettings.popupClass),e},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"suggestion",{get:function(){if(this.text&&this.suggestedText){var e=this.suggestedText.toLowerCase().startsWith(this.text.toLowerCase());return this.suggest&&!this.backspacePressed&&e?this.suggestedText:void 0}this.suggestedText=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"appendTo",{get:function(){var e=this.popupSettings.appendTo;if(e&&"root"!==e)return"component"===e?this.container:e},enumerable:!0,configurable:!0}),O.prototype.toggle=function(t){var i=this;Promise.resolve(null).then(function(){var e=_.isPresent(t)?t:!i._open;i._toggle(e)})},Object.defineProperty(O.prototype,"isOpen",{get:function(){return this._open},enumerable:!0,configurable:!0}),O.prototype.togglePopup=function(e){var t=this.disabled||this.readonly,i=this.isOpen===e;t||i||this.triggerPopupEvents(e)||this._toggle(e)},Object.defineProperty(O.prototype,"activeDescendant",{get:function(){if(!this.isOpen||!_.isPresent(this.selectionService.focused)||-1===this.selectionService.focused)return null;var e=this.dataService.itemAt(this.selectionService.focused);return this.optionPrefix+"-"+_.getter(e,this.valueField)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"noDataLabel",{get:function(){if(0===this.data.length)return this.noDataText},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"clearTitle",{get:function(){return this.localization.get("clearTitle")},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"data",{get:function(){var e=this.virtual;if(e){var t=e.skip||0,i=t+e.pageSize;return e.total=this.dataService.data.length,this.dataService.data.slice(t,i)}return this.dataService.data},set:function(e){this.dataService.data=e||[],this.virtual&&(this.virtual.skip=0),this.setState(this.value),this.filterable&&(this.selectionService.focused=this.isOpen&&this.data.length&&this.highlightFirst?this.firstFocusableIndex(0):-1),this.suggest&&0<this.dataService.itemsCount&&(this.suggestedText=_.getter(this.dataService.itemAt(0),this.valueField))},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"value",{get:function(){return this._value||""},set:function(e){this.verifySettings(e),this._value=e||"",this.cdr.markForCheck()},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"popupSettings",{get:function(){return this._popupSettings},set:function(e){this._popupSettings=Object.assign({animate:!0},e)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"itemDisabled",{set:function(e){if("function"!=typeof e)throw new Error("itemDisabled must be a function, but received "+JSON.stringify(e)+".");this.disabledItemsService.itemDisabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"tabIndex",{get:function(){return this.tabindex},set:function(e){this.tabindex=e},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"virtual",{get:function(){return this._virtualSettings},set:function(e){this._virtualSettings=T.normalizeVirtualizationSettings(e)},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"isFocused",{get:function(){return this._isFocused},set:function(e){this.renderer[e?"addClass":"removeClass"](this.wrapper,"k-state-focused"),this._isFocused=e},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"isDisabled",{get:function(){return this.disabled},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"dir",{get:function(){return this.direction},enumerable:!0,configurable:!0}),O.prototype.ngOnInit=function(){var i=this;this.renderer.removeAttribute(this.wrapper,"tabindex"),this.localizationChangeSubscription=this.localization.changes.subscribe(function(e){var t=e.rtl;i.direction=t?"rtl":"ltr",i.setMessages()}),this.setMessages()},O.prototype.ngOnDestroy=function(){this.destroyPopup(),this.unsubscribeEvents(),clearTimeout(this.messagesTimeout),this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe()},O.prototype.ngOnChanges=function(e){var t=this.virtual;t&&e.data&&e.data.isFirstChange()&&this.pageChange({skip:0,take:t.pageSize}),/(value|valueField)/g.test(Object.keys(e).join())&&this.setState(this.value)},O.prototype.reset=function(){this.setState("")},O.prototype.clearValue=function(e){e.stopImmediatePropagation(),this.focus(),this.change(""),this.filterable&&this.filterChange.emit(""),this.selectionService.resetSelection([])},O.prototype.writeValue=function(e){this.setState(e)},O.prototype.registerOnChange=function(e){this.onChangeCallback=e},O.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},O.prototype.setDisabledState=function(e){this.disabled=e},O.prototype.focus=function(){this.disabled||this.searchbar.focus()},O.prototype.blur=function(){this.disabled||this.searchbar.blur()},O.prototype.onResize=function(){var e,t,i,n;this._open&&(e=this.popupRef.popupElement,i=(t=this.width).min,n=t.max,e.style.minWidth=i,e.style.width=n)},O.prototype.emitChange=function(){this.value!==this._previousValue&&(this._previousValue=this.value,this.onChangeCallback(this.value),this.valueChange.emit(this.value))},O.prototype.verifySettings=function(e){if(u.isDevMode()&&_.isPresent(e)&&"string"!=typeof e)throw new Error("Expected value of type string. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/autocomplete/#toc-value")},O.prototype.search=function(e,t){var i;void 0===t&&(t=0),i=e.length&&this.dataService.itemsCount?this.dataService.findIndex(this.findIndexPredicate(e),t):-1,this.disabledItemsService.isIndexDisabled(i)?i+1<this.dataService.itemsCount?this.search(e,i+1):this.selectionService.focus(-1):(this.selectionService.focus(i),this.suggest&&(this.suggestedText=_.getter(this.dataService.itemAt(i),this.valueField)))},O.prototype.navigate=function(e){this.isOpen&&this.selectionService.focus(e)},O.prototype.handleNavigate=function(e){var t,i=isNaN(this.selectionService.focused)?this.firstFocusableIndex(0):this.selectionService.focused;this.disabled||this.readonly||isNaN(i)||(t=this.navigationService.process({current:i,max:this.dataService.itemsCount-1,min:0,originalEvent:e}))!==b.NavigationAction.Undefined&&t!==b.NavigationAction.Backspace&&t!==b.NavigationAction.Delete&&t!==b.NavigationAction.Home&&t!==b.NavigationAction.End&&t!==b.NavigationAction.Left&&t!==b.NavigationAction.Right&&(t===b.NavigationAction.Enter&&this.isOpen||t!==b.NavigationAction.Enter)&&e.preventDefault()},O.prototype.handleEnter=function(e){var t,i,n=this.selectionService.focused;this._filtering=!1,this.isOpen&&e.originalEvent.preventDefault(),i=0<=n?_.getter(this.dataService.itemAt(n),this.valueField):(t=this.suggest&&this.suggestedText&&this.data.length&&_.getter(this.dataService.itemAt(0),this.valueField,!0).toLowerCase()===this.searchbar.value.toLowerCase(),this.isOpen&&t?this.suggestedText:this.searchbar.value),this.change(i)},O.prototype.handleEscape=function(){this.togglePopup(!1),this.selectionService.focused=-1,this.suggestedText=null},O.prototype.searchBarChange=function(e){var t=_.isPresent(this.text)?this.text.length:0;this.backspacePressed=e.length<t,this.text=e,this.togglePopup(0<e.length),this._filtering=!0,this.highlightFirst||(this.selectionService.focused=-1),this.filterable?this.filterChange.emit(e):this.highlightFirst&&this.search(e)},O.prototype.handleFocus=function(){var e=this;this.isFocused=!0,s.hasObservers(this.onFocus)&&this._zone.run(function(){e.onFocus.emit()})},O.prototype.handleBlur=function(){var e=this;this._filtering=!1;var t,i,n=this.filterable?this.selectionService.focused:-1;this.searchbar.input.nativeElement.scrollLeft=0;var a=(i=-1!==n?(t=this.dataService.itemAt(n),_.getter(t,this.valueField,!0)||""):this.searchbar.value)===this.searchbar.value,o=i.toLowerCase()===this.searchbar.value.toLowerCase();!a&&o&&this.selectionService.resetSelection([]),this.isFocused=!1;var r=this.value!==this.text;s.hasObservers(this.onBlur)||s.hasObservers(this.close)||_.isUntouched(this.wrapper)||r?this._zone.run(function(){r&&e.change(e.searchbar.value),e.onBlur.emit(),e.onTouchedCallback(),e.togglePopup(!1)}):this.togglePopup(!1)},O.prototype.pageChange=function(e){this.virtual.skip=e.skip},O.prototype.setState=function(e){this._filtering||(this.value=e,this._previousValue=this.value,this.text=this.value)},O.prototype.change=function(e){this.togglePopup(!1),this.valueChangeSubject.next(e)},O.prototype.subscribeEvents=function(){var t=this;s.isDocumentAvailable()&&(this.valueChangeSubscription=this.valueChangeSubject.pipe(f.filter(function(e){return!(t.value===e&&t.text===e)})).subscribe(function(e){t.value=e,t.text=e,t.emitChange()}),this.changeSubscription=this.selectionService.onChange.subscribe(this.handleItemChange.bind(this)),this.focusSubscription=this.selectionService.onFocus.subscribe(this.handleItemFocus.bind(this)),this.navigationSubscription=g.merge(this.navigationService.up,this.navigationService.down).subscribe(function(e){return t.navigate(e.index)}),this.closeSubscription=this.navigationService.close.subscribe(function(){return t.togglePopup(!1)}),this.enterSubscription=this.navigationService.enter.subscribe(this.handleEnter.bind(this)),this.escSubscription=this.navigationService.esc.subscribe(this.handleEscape.bind(this)))},O.prototype.unsubscribeEvents=function(){s.isDocumentAvailable()&&(this.changeSubscription.unsubscribe(),this.navigationSubscription.unsubscribe(),this.closeSubscription.unsubscribe(),this.enterSubscription.unsubscribe(),this.escSubscription.unsubscribe(),this.valueChangeSubscription.unsubscribe(),this.focusSubscription.unsubscribe())},O.prototype.handleItemChange=function(e){var t,i=e.indices.length?e.indices[0]:void 0;this._filtering=!1,this.selectionService.resetSelection([-1]),_.isPresent(i)&&(t=_.getter(this.dataService.itemAt(i),this.valueField),this.change(t))},O.prototype.handleItemFocus=function(e){var t=this.selectionService.focused;Boolean(this.suggest&&this.data&&this.data.length&&0<=t)&&(this.suggestedText=_.getter(this.dataService.itemAt(t),this.valueField))},O.prototype.createPopup=function(){var e=this;this.virtual&&(this.virtual.skip=0);var t="rtl"===this.direction?"right":"left",i={horizontal:t,vertical:"bottom"},n={horizontal:t,vertical:"top"};this.popupRef=this.popupService.open({anchor:this.wrapper,animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupClass:this.listContainerClasses,positionMode:"absolute",popupAlign:n,anchorAlign:i});var a=this.popupRef.popupElement,o=this.width,r=o.min,s=o.max;a.addEventListener("mousedown",this.popupMouseDownHandler),a.style.minWidth=r,a.style.width=s,a.style.height=this.height,a.setAttribute("dir",this.direction),this.popupRef.popupOpen.subscribe(function(){e.cdr.detectChanges(),e.optionsList.scrollToItem(e.selectionService.focused)}),this.popupRef.popupAnchorViewportLeave.subscribe(function(){return e.togglePopup(!1)})},O.prototype.destroyPopup=function(){this.popupRef&&(this.popupRef.popupElement.removeEventListener("mousedown",this.popupMouseDownHandler),this.popupRef.close(),this.popupRef=null)},O.prototype._toggle=function(e){this._open=e,this.destroyPopup(),this._open&&this.createPopup()},O.prototype.triggerPopupEvents=function(e){var t=new S.PreventableEvent;return e?this.open.emit(t):this.close.emit(t),t.isDefaultPrevented()},O.prototype.firstFocusableIndex=function(e){var t=this.data.length-1;return this.disabledItemsService.isIndexDisabled(e)?e<t?this.firstFocusableIndex(e+1):void 0:e},O.prototype.findIndexPredicate=function(i){var n=this;return this.dataService.grouped?function(e){var t=_.getter(e.value,n.valueField);return(t=_.isPresent(t)?t.toString().toLowerCase():"").startsWith(i.toLowerCase())}:function(e){var t=_.getter(e,n.valueField);return(t=_.isPresent(t)?t.toString().toLowerCase():"").startsWith(i.toLowerCase())}},O.prototype.setMessages=function(){var e=this;this._zone.runOutsideAngular(function(){clearTimeout(e.messagesTimeout),e.messagesTimeout=setTimeout(function(){e.noDataText=e.localization.get("noDataText"),e.cdr.detectChanges()})})},n.__decorate([u.Input(),n.__metadata("design:type",Boolean)],O.prototype,"highlightFirst",void 0),n.__decorate([u.Input(),n.__metadata("design:type",String)],O.prototype,"focusableId",void 0),n.__decorate([u.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],O.prototype,"data",null),n.__decorate([u.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],O.prototype,"value",null),n.__decorate([u.Input(),n.__metadata("design:type",String)],O.prototype,"valueField",void 0),n.__decorate([u.Input(),n.__metadata("design:type",String)],O.prototype,"placeholder",void 0),n.__decorate([u.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],O.prototype,"popupSettings",null),n.__decorate([u.Input(),n.__metadata("design:type",Number)],O.prototype,"listHeight",void 0),n.__decorate([u.Input(),n.__metadata("design:type",Boolean)],O.prototype,"loading",void 0),n.__decorate([u.Input(),n.__metadata("design:type",Boolean)],O.prototype,"clearButton",void 0),n.__decorate([u.Input(),n.__metadata("design:type",Boolean)],O.prototype,"suggest",void 0),n.__decorate([u.Input(),n.__metadata("design:type",Boolean)],O.prototype,"disabled",void 0),n.__decorate([u.Input(),n.__metadata("design:type",Function),n.__metadata("design:paramtypes",[Function])],O.prototype,"itemDisabled",null),n.__decorate([u.Input(),n.__metadata("design:type",Boolean)],O.prototype,"readonly",void 0),n.__decorate([u.Input(),n.__metadata("design:type",Number)],O.prototype,"tabindex",void 0),n.__decorate([u.Input("tabIndex"),n.__metadata("design:type",Number),n.__metadata("design:paramtypes",[Number])],O.prototype,"tabIndex",null),n.__decorate([u.Input(),n.__metadata("design:type",Boolean)],O.prototype,"filterable",void 0),n.__decorate([u.Input(),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[Object])],O.prototype,"virtual",null),n.__decorate([u.Output(),n.__metadata("design:type",u.EventEmitter)],O.prototype,"valueChange",void 0),n.__decorate([u.Output(),n.__metadata("design:type",u.EventEmitter)],O.prototype,"filterChange",void 0),n.__decorate([u.Output(),n.__metadata("design:type",u.EventEmitter)],O.prototype,"open",void 0),n.__decorate([u.Output(),n.__metadata("design:type",u.EventEmitter)],O.prototype,"close",void 0),n.__decorate([u.Output("focus"),n.__metadata("design:type",u.EventEmitter)],O.prototype,"onFocus",void 0),n.__decorate([u.Output("blur"),n.__metadata("design:type",u.EventEmitter)],O.prototype,"onBlur",void 0),n.__decorate([u.ContentChild(r.ItemTemplateDirective),n.__metadata("design:type",r.ItemTemplateDirective)],O.prototype,"template",void 0),n.__decorate([u.ContentChild(p.HeaderTemplateDirective),n.__metadata("design:type",p.HeaderTemplateDirective)],O.prototype,"headerTemplate",void 0),n.__decorate([u.ContentChild(l.FooterTemplateDirective),n.__metadata("design:type",l.FooterTemplateDirective)],O.prototype,"footerTemplate",void 0),n.__decorate([u.ContentChild(y.NoDataTemplateDirective),n.__metadata("design:type",y.NoDataTemplateDirective)],O.prototype,"noDataTemplate",void 0),n.__decorate([u.ContentChild(d.GroupTemplateDirective),n.__metadata("design:type",d.GroupTemplateDirective)],O.prototype,"groupTemplate",void 0),n.__decorate([u.ContentChild(c.FixedGroupTemplateDirective),n.__metadata("design:type",c.FixedGroupTemplateDirective)],O.prototype,"fixedGroupTemplate",void 0),n.__decorate([u.ViewChild("container",{read:u.ViewContainerRef}),n.__metadata("design:type",u.ViewContainerRef)],O.prototype,"container",void 0),n.__decorate([u.ViewChild("popupTemplate"),n.__metadata("design:type",u.TemplateRef)],O.prototype,"popupTemplate",void 0),n.__decorate([u.ViewChild(o.SearchBarComponent),n.__metadata("design:type",o.SearchBarComponent)],O.prototype,"searchbar",void 0),n.__decorate([u.ViewChild("optionsList"),n.__metadata("design:type",w.ListComponent)],O.prototype,"optionsList",void 0),n.__decorate([u.HostBinding("class.k-widget"),u.HostBinding("class.k-autocomplete"),u.HostBinding("class.k-header"),n.__metadata("design:type",Boolean)],O.prototype,"widgetClasses",void 0),n.__decorate([u.HostBinding("class.k-state-disabled"),n.__metadata("design:type",Boolean),n.__metadata("design:paramtypes",[])],O.prototype,"isDisabled",null),n.__decorate([u.HostBinding("attr.dir"),n.__metadata("design:type",Object),n.__metadata("design:paramtypes",[])],O.prototype,"dir",null),P=n.__decorate([u.Component({exportAs:"kendoAutoComplete",providers:[t.AUTOCOMPLETE_VALUE_ACCESSOR,D.DataService,h.SelectionService,m.NavigationService,v.DisabledItemsService,x.LocalizationService,{provide:x.L10N_PREFIX,useValue:"kendo.autocomplete"},{provide:C.FilterableDropDownComponentBase,useExisting:u.forwardRef(function(){return P})},{provide:s.KendoInput,useExisting:u.forwardRef(function(){return P})}],selector:"kendo-autocomplete",template:'\n        <ng-container kendoAutoCompleteLocalizedMessages\n            i18n-noDataText="kendo.autocomplete.noDataText|The text displayed in the popup when there are no items"\n            noDataText="NO DATA FOUND"\n\n            i18n-clearTitle="kendo.autocomplete.clearTitle|The title of the clear button"\n            clearTitle="clear"\n        >\n        </ng-container>\n        <kendo-searchbar #searchbar\n            [role]="\'combobox\'"\n            [id]="focusableId"\n            [listId]="listBoxId"\n            [activeDescendant]="activeDescendant"\n            [noDataLabel]="noDataLabel"\n            [userInput]="text"\n            [suggestedText]="suggestion"\n            [disabled]="disabled"\n            [readonly]="readonly"\n            [tabIndex]="tabIndex"\n            [popupOpen]="isOpen"\n            [placeholder]="placeholder"\n            (onNavigate)="handleNavigate($event)"\n            (valueChange)="searchBarChange($event)"\n            (onBlur)="handleBlur()"\n            (onFocus)="handleFocus()"\n        ></kendo-searchbar>\n        <span *ngIf="!loading && !readonly && (clearButton && text?.length)" class="k-icon k-clear-value k-i-close" [attr.title]="clearTitle" role="button" tabindex="-1" (click)="clearValue($event)" (mousedown)="$event.preventDefault()">\n</span>\n        <span *ngIf="loading" class="k-icon k-i-loading"></span>\n        <ng-template #popupTemplate>\n            \x3c!--header template--\x3e\n            <ng-template *ngIf="headerTemplate"\n                [templateContext]="{\n                    templateRef: headerTemplate.templateRef\n                }">\n            </ng-template>\n            \x3c!--list--\x3e\n            <kendo-list\n                #optionsList\n                [id]="listBoxId"\n                [optionPrefix]="optionPrefix"\n                [data]="data"\n                [textField]="valueField"\n                [valueField]="valueField"\n                [template]="template"\n                [groupTemplate]="groupTemplate"\n                [fixedGroupTemplate]="fixedGroupTemplate"\n                [height]="listHeight"\n                [show]="isOpen"\n                [virtual]="virtual"\n                (pageChange)="pageChange($event)"\n            >\n            </kendo-list>\n            \x3c!--no-data template--\x3e\n            <div class="k-nodata" *ngIf="data.length === 0">\n                <ng-template [ngIf]="noDataTemplate"\n                    [templateContext]="{\n                        templateRef: noDataTemplate?.templateRef\n                    }">\n                </ng-template>\n                <ng-template [ngIf]="!noDataTemplate">\n                    <div>{{ noDataText }}</div>\n                </ng-template>\n            </div>\n            \x3c!--footer template--\x3e\n            <ng-template *ngIf="footerTemplate"\n                [templateContext]="{\n                    templateRef: footerTemplate.templateRef\n                }">\n            </ng-template>\n        </ng-template>\n        <ng-template [ngIf]="isOpen">\n            <kendo-resize-sensor (resize)="onResize()"></kendo-resize-sensor>\n        </ng-template>\n        <ng-container #container></ng-container>\n  '}),n.__metadata("design:paramtypes",[x.LocalizationService,D.DataService,I.PopupService,h.SelectionService,m.NavigationService,v.DisabledItemsService,u.NgZone,u.ChangeDetectorRef,u.Renderer2,u.ElementRef])],O));function O(e,t,i,n,a,o,r,s,p,l){this.localization=e,this.dataService=t,this.popupService=i,this.selectionService=n,this.navigationService=a,this.disabledItemsService=o,this._zone=r,this.cdr=s,this.renderer=p,this.highlightFirst=!0,this.focusableId="k-"+_.guid(),this.placeholder="",this.listHeight=200,this.clearButton=!0,this.disabled=!1,this.readonly=!1,this.tabindex=0,this.filterable=!1,this.valueChange=new u.EventEmitter,this.filterChange=new u.EventEmitter,this.open=new u.EventEmitter,this.close=new u.EventEmitter,this.onFocus=new u.EventEmitter,this.onBlur=new u.EventEmitter,this.widgetClasses=!0,this.listBoxId=_.guid(),this.optionPrefix=_.guid(),this.onChangeCallback=function(e){},this.onTouchedCallback=function(e){},this.popupMouseDownHandler=function(e){return e.preventDefault()},this._popupSettings={animate:!0},this._open=!1,this._value="",this._previousValue="",this._filtering=!1,this.valueChangeSubject=new g.Subject,this._isFocused=!1,this.direction=e.rtl?"rtl":"ltr",this.wrapper=l.nativeElement,this.data=[],this.subscribeEvents(),this.selectionService.resetSelection([-1])}t.AutoCompleteComponent=E},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=(r.prototype.ngOnChanges=function(){var e=this;this.focused&&this.nextTick(function(){return e.element.nativeElement.focus()})},r.prototype.nextTick=function(e){this.zone.runOutsideAngular(function(){return setTimeout(e)})},n.__decorate([a.Input("filterInput"),n.__metadata("design:type",Boolean)],r.prototype,"focused",void 0),n.__decorate([a.Directive({selector:"[filterInput]"}),n.__metadata("design:paramtypes",[a.ElementRef,a.NgZone])],r));function r(e,t){this.element=e,this.zone=t}t.FilterInputDirective=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a,o=i(0),r=i(1),s=i(3),p=i(39),l=(n=p.Messages,o.__extends(u,n),a=u,Object.defineProperty(u.prototype,"override",{get:function(){return!0},enumerable:!0,configurable:!0}),a=o.__decorate([r.Component({providers:[{provide:p.Messages,useExisting:r.forwardRef(function(){return a})}],selector:"kendo-dropdownlist-messages, kendo-combobox-messages, kendo-autocomplete-messages, kendo-multiselect-messages",template:""}),o.__metadata("design:paramtypes",[s.LocalizationService])],u));function u(e){var t=n.call(this)||this;return t.service=e,t}t.CustomMessagesComponent=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a,o=i(0),r=i(1),s=i(3),p=i(39),l=(n=p.Messages,o.__extends(u,n),a=u,a=o.__decorate([r.Directive({providers:[{provide:p.Messages,useExisting:r.forwardRef(function(){return a})}],selector:"\n    [kendoDropDownListLocalizedMessages],\n    [kendoComboBoxLocalizedMessages],\n    [kendoAutoCompleteLocalizedMessages],\n    [kendoMultiSelectLocalizedMessages]\n  "}),o.__metadata("design:paramtypes",[s.LocalizationService])],u));function u(e){var t=n.call(this)||this;return t.service=e,t}t.LocalizedMessagesDirective=l},function(e,t){e.exports=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i(1),o=i(40),r=i(38),s=i(36),p=i(35),l=n.__decorate([a.NgModule({exports:[o.AutoCompleteModule,r.ComboBoxModule,s.DropDownListModule,p.MultiSelectModule]})],function(){});t.DropDownsModule=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i(0),o=(n=i(12).PreventableEvent,a.__extends(r,n),r);function r(e){var t=n.call(this)||this;return t.dataItem=e,t}t.RemoveTagEvent=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(49);t.AutoCompleteComponent=n.AutoCompleteComponent;var a=i(47);t.ComboBoxComponent=a.ComboBoxComponent;var o=i(46);t.DropDownListComponent=o.DropDownListComponent;var r=i(32);t.MultiSelectComponent=r.MultiSelectComponent;var s=i(45);t.TagListComponent=s.TagListComponent;var p=i(8);t.ItemTemplateDirective=p.ItemTemplateDirective;var l=i(7);t.GroupTemplateDirective=l.GroupTemplateDirective;var u=i(6);t.FixedGroupTemplateDirective=u.FixedGroupTemplateDirective;var d=i(31);t.CustomItemTemplateDirective=d.CustomItemTemplateDirective;var c=i(16);t.HeaderTemplateDirective=c.HeaderTemplateDirective;var h=i(15);t.FooterTemplateDirective=h.FooterTemplateDirective;var m=i(33);t.ValueTemplateDirective=m.ValueTemplateDirective;var v=i(44);t.TemplateContextDirective=v.TemplateContextDirective;var g=i(26);t.GroupTagTemplateDirective=g.GroupTagTemplateDirective;var f=i(43);t.SelectableDirective=f.SelectableDirective;var _=i(42);t.SummaryTagDirective=_.SummaryTagDirective;var b=i(41);t.FilterDirective=b.FilterDirective;var y=i(54);t.DropDownsModule=y.DropDownsModule;var S=i(35);t.MultiSelectModule=S.MultiSelectModule;var x=i(17);t.SharedModule=x.SharedModule;var I=i(40);t.AutoCompleteModule=I.AutoCompleteModule;var C=i(38);t.ComboBoxModule=C.ComboBoxModule;var D=i(36);t.DropDownListModule=D.DropDownListModule;var w=i(9);t.SharedDirectivesModule=w.SharedDirectivesModule;var T=i(10);t.ListComponent=T.ListComponent;var P=i(11);t.PopupComponent=P.PopupComponent;var E=i(12);t.PreventableEvent=E.PreventableEvent,function(e){for(var t in e)O(t,e[t])}(t)}],n.c=a,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=56)}}});